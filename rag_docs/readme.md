# TeleGaGa - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**Telegram –±–æ—Ç –Ω–∞ Kotlin —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π GigaChat, Ollama, MCP –∏ RAG**

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
4. [MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#mcp-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
5. [RAG —Å–∏—Å—Ç–µ–º–∞](#rag-—Å–∏—Å—Ç–µ–º–∞)
6. [–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π](#—Å–∏—Å—Ç–µ–º–∞-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π)
7. [–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–∏—Å—Ç–æ—Ä–∏—è-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

# –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

TeleGaGa - —ç—Ç–æ Telegram –±–æ—Ç –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Kotlin, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –¥–≤—É–º—è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏:
- **GigaChat** (Sberbank's LLM service) - –æ—Å–Ω–æ–≤–Ω–æ–π AI –±—ç–∫–µ–Ω–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MCP tool calling
- **Ollama** (–ª–æ–∫–∞–ª—å–Ω—ã–π LLM) - –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –†–∞–∑–≥–æ–≤–æ—Ä–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π (20+ —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É
- **Model Context Protocol (MCP)** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **RAG (Retrieval-Augmented Generation)** —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –°–∏—Å—Ç–µ–º—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫**: Kotlin 2.2.10
- **Build tool**: Gradle 8.14
- **HTTP –∫–ª–∏–µ–Ω—Ç**: Ktor 3.3.0
- **Telegram API**: kotlin-telegram-bot 6.1.0
- **MCP**: HTTP (Node.js servers) + Stdio (Python servers)
- **AI –º–æ–¥–µ–ª–∏**: GigaChat, Ollama (llama3.2:1b, nomic-embed-text)
- **Embeddings**: Ollama nomic-embed-text (768-–º–µ—Ä–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã)
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: JSON —Ñ–∞–π–ª—ã (–∏—Å—Ç–æ—Ä–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, embeddings)

---

# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## –°–ª–æ–∏ –ø—Ä–æ–µ–∫—Ç–∞

TeleGaGa –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:

```
src/main/kotlin/
‚îú‚îÄ‚îÄ GigaModels.kt                    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö GigaChat API
‚îú‚îÄ‚îÄ OllamaModels.kt                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö Ollama API
‚îî‚îÄ‚îÄ ru/dikoresearch/
    ‚îú‚îÄ‚îÄ Main.kt                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ domain/                      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Domain Layer)
    ‚îÇ   ‚îú‚îÄ‚îÄ ChatOrchestrator.kt      # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îÇ   ‚îú‚îÄ‚îÄ RagService.kt            # –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ RAG
    ‚îÇ   ‚îú‚îÄ‚îÄ ReminderScheduler.kt     # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
    ‚îÇ   ‚îú‚îÄ‚îÄ ToolCallHandler.kt       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ MCP tool calls
    ‚îÇ   ‚îú‚îÄ‚îÄ TextChunker.kt           # –†–∞–∑–±–∏–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ MarkdownPreprocessor.kt  # –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ Markdown
    ‚îî‚îÄ‚îÄ infrastructure/              # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π
        ‚îú‚îÄ‚îÄ config/
        ‚îÇ   ‚îî‚îÄ‚îÄ ConfigService.kt     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
        ‚îú‚îÄ‚îÄ http/
        ‚îÇ   ‚îú‚îÄ‚îÄ GigaChatClient.kt    # HTTP –∫–ª–∏–µ–Ω—Ç GigaChat API
        ‚îÇ   ‚îî‚îÄ‚îÄ OllamaClient.kt      # HTTP –∫–ª–∏–µ–Ω—Ç Ollama API
        ‚îú‚îÄ‚îÄ mcp/
        ‚îÇ   ‚îú‚îÄ‚îÄ HttpMcpService.kt    # HTTP MCP –∫–ª–∏–µ–Ω—Ç (Node.js)
        ‚îÇ   ‚îî‚îÄ‚îÄ StdioMcpService.kt   # Stdio MCP –∫–ª–∏–µ–Ω—Ç (Python)
        ‚îú‚îÄ‚îÄ embeddings/
        ‚îÇ   ‚îî‚îÄ‚îÄ EmbeddingService.kt  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings
        ‚îú‚îÄ‚îÄ persistence/
        ‚îÇ   ‚îú‚îÄ‚îÄ ChatHistoryManager.kt      # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–æ–≤
        ‚îÇ   ‚îú‚îÄ‚îÄ ChatSettingsManager.kt     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
        ‚îÇ   ‚îî‚îÄ‚îÄ EmbeddingsManager.kt       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
        ‚îî‚îÄ‚îÄ telegram/
            ‚îî‚îÄ‚îÄ TelegramBotService.kt # Telegram –±–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Entry Point (Main.kt)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Å–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ ConfigService
- –°–æ–∑–¥–∞–Ω–∏–µ HTTP –∫–ª–∏–µ–Ω—Ç–∞ —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π SSL-–ø—Ä–æ–≤–µ—Ä–∫–æ–π (–¥–ª—è GigaChat)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –ó–∞–ø—É—Å–∫ Health Check —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ—Ä—Ç 12222)
- Graceful shutdown –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

**–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã:**
- `JsonRole` - –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö JSON –æ—Ç–≤–µ—Ç–æ–≤
- `AssistantRole` - —ç–∫—Å–ø–µ—Ä—Ç-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
- `SingleRole` - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ ESP32
- `McpEnabledRole` - AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å MCP tool access (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 2. Domain Layer - ChatOrchestrator

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ß–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö frameworks

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `processMessage()` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç
- `updateSystemRole()` - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —á–∞—Ç–∞
- `clearHistory()` - –æ—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç Telegram API (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ —Ç–∏–ø—ã: Long, String)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ 20 —Å–æ–æ–±—â–µ–Ω–∏–π
- –û–±—Ä–µ–∑–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –¥–æ 3800 —Å–∏–º–≤–æ–ª–æ–≤ (–ª–∏–º–∏—Ç Telegram)
- –†–µ–∞–ª–∏–∑—É–µ—Ç tool calling loop (–¥–æ 5 –∏—Ç–µ—Ä–∞—Ü–∏–π)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–¥–ª—è "—Å–µ–≥–æ–¥–Ω—è", "–∑–∞–≤—Ç—Ä–∞")
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (ChatResponse)

### 3. AI Clients

#### GigaChatClient
- Token-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- Thread-safe —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–º —á–µ—Ä–µ–∑ Mutex
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ function calling –¥–ª—è MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- OAuth token endpoint: `https://ngw.devices.sberbank.ru:9443/api/v2/oauth`
- Chat completions endpoint: `{baseUrl}/api/v1/chat/completions`

#### OllamaClient
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å `llama3.2:1b` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Endpoint: `http://localhost:11434/api/chat`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ RAG

### 4. MCP Integration

#### HttpMcpService (Node.js —Å–µ—Ä–≤–µ—Ä—ã)
**Protocol:** Streamable HTTP (MCP 2024-11-05)

**–£–ø—Ä–∞–≤–ª—è–µ—Ç 3 —Å–µ—Ä–≤–µ—Ä–∞–º–∏:**
- **weather** (port 3001) - –ø–æ–≥–æ–¥–∞ —á–µ—Ä–µ–∑ wttr.in
- **reminders** (port 3002) - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **chuck** (port 3003) - —à—É—Ç–∫–∏ –ø—Ä–æ –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞

**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ Node.js —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ ProcessBuilder
- –°–æ–∑–¥–∞–Ω–∏–µ HTTP —Å–µ—Å—Å–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (mcp-session-id header)
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ—Ç –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –µ–¥–∏–Ω—ã–π —Å–ø–∏—Å–æ–∫
- Health checks –∏ graceful shutdown
- Thread-safe —Å Mutex –∑–∞—â–∏—Ç–æ–π

#### StdioMcpService (Python —Å–µ—Ä–≤–µ—Ä—ã)
**Protocol:** JSON-RPC over stdin/stdout (MCP 2024-11-05)

**–£–ø—Ä–∞–≤–ª—è–µ—Ç Docker MCP —Å–µ—Ä–≤–µ—Ä–æ–º:**
- **compose_create** - —Å–æ–∑–¥–∞–Ω–∏–µ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **compose_spec** - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- **compose_apply** - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
- **compose_down** - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **docker_ps** - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **docker_images** - –ø–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—Ä–∞–∑—ã
- **docker_logs** - –ø–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Docker Desktop –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- mcp-server-docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ pipx
- Python 3.12+

#### ToolCallHandler
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä tool calling

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (HTTP –∏ Stdio)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è MCP tools –≤ —Ñ–æ—Ä–º–∞—Ç GigaChat function
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è function calls –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É MCP —Å–µ—Ä–≤–∏—Å—É
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ function calls –∏ –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–∞–∫ JSON
- –û–±—Ä–∞–±–æ—Ç–∫–∞ JSON –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫

### 5. RAG (Retrieval-Augmented Generation)

#### RagService
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `findRelevantChunks()` - –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Ç–æ–ø-K —á–∞–Ω–∫–æ–≤ –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É
- `findRelevantChunksWithFilter()` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (0.0-1.0)
- `formatContext()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –≤ LLM-friendly –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Ollama `nomic-embed-text` –¥–ª—è embeddings (768-–º–µ—Ä–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã)
- –•—Ä–∞–Ω–∏–ª–∏—â–µ: `embeddings_store/<filename>.embeddings.json`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —Å–æ–∫—Ä–∞—â–∞–µ—Ç —à—É–º –Ω–∞ 20-30%
- –£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤

**RagSearchResult data class:**
- chunks: –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏ (—Ç–µ–∫—Å—Ç, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å, –∏–Ω–¥–µ–∫—Å)
- originalCount: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- filteredCount: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- avgRelevance, minRelevance, maxRelevance: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### EmbeddingService
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Ollama embedding API
- `generateEmbeddings()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings –¥–ª—è —Ç–µ–∫—Å—Ç–∞
- `generateEmbeddingsForMarkdown()` - –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —á–∞–Ω–∫–∏–Ω–≥ Markdown
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç TextChunker –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–±–∏–µ–Ω–∏—è

#### ChatSettingsManager
**–†–∞—Å—à–∏—Ä–µ–Ω –¥–ª—è RAG (–î–µ–Ω—å 18):**
- `ragRelevanceThreshold` (Float, default 0.5) - –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- `ragEnabled` (Boolean) - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RAG
- `ragTopK` (Int) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –¥–ª—è reranking
- Thread-safe —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å Mutex per chatId
- JSON-based –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ `chat_settings/<chatId>_settings.json`

### 6. TelegramBotService

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ò–∑–æ–ª—è—Ü–∏—è –≤—Å–µ–π Telegram-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏

**–ö–æ–º–∞–Ω–¥—ã:**
- –û–±—â–∏–µ: `/start`, `/changeRole`, `/changeT`, `/clearChat`
- MCP: `/enableMcp`, `/listTools`
- RAG: `/createEmbeddings`, `/testRag`, `/compareRag`, `/setThreshold`
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: `/setReminderTime`, `/disableReminders`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `applicationScope.launch {}` –¥–ª—è suspend —Ñ—É–Ω–∫—Ü–∏–π
- –•—Ä–∞–Ω–∏—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤ ChatOrchestrator
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

### 7. ReminderScheduler

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –¥–ª—è —á–∞—Ç–æ–≤ —Å reminderTime
- –û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- –í–∫–ª—é—á–∞–µ—Ç –ø–æ–≥–æ–¥—É –¥–ª—è –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞ (get_weather MCP tool)
- –í–∫–ª—é—á–∞–µ—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—É—é —à—É—Ç–∫—É –ø—Ä–æ –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ChatOrchestrator —Å MCP –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç lastReminderSent –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```
User Message (Telegram)
    ‚Üì
TelegramBotService.setupMessageHandlers()
    ‚Üì
ChatOrchestrator.processMessage()
    ‚Üì
ChatHistoryManager.loadHistory()
    ‚Üì
[–ï—Å–ª–∏ MCP –≤–∫–ª—é—á–µ–Ω]
    ToolCallHandler.getAvailableFunctions()
    ‚Üì
    GigaChatClient.chatCompletion(functions=5)
    ‚Üì
    [–¶–∏–∫–ª tool calling –¥–æ 5 –∏—Ç–µ—Ä–∞—Ü–∏–π]
        –ï—Å–ª–∏ finish_reason="function_call":
            ToolCallHandler.executeFunctionCall()
            ‚Üì
            McpService.callTool()
            ‚Üì
            –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
            ‚Üì
            –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ GigaChat
    ‚Üì
ChatHistoryManager.saveHistory()
    ‚Üì
[–ï—Å–ª–∏ history.size > 20]
    ChatOrchestrator.summarizeHistory()
    ‚Üì
ChatResponse ‚Üí TelegramBotService
    ‚Üì
bot.sendMessage() ‚Üí User
```

### RAG –ø–æ–∏—Å–∫

```
User: /testRag <–≤–æ–ø—Ä–æ—Å>
    ‚Üì
TelegramBotService
    ‚Üì
RagService.findRelevantChunksWithFilter()
    ‚Üì
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embedding –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ (Ollama nomic-embed)
2. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö embeddings –∏–∑ embeddings_store/readme.embeddings.json
3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥—É (‚â• ragRelevanceThreshold)
6. –í–æ–∑–≤—Ä–∞—Ç —Ç–æ–ø-K –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
    ‚Üì
RagService.formatContext()
    ‚Üì
OllamaClient.chatCompletion() - –¥–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞:
    ‚Ä¢ –ë–ï–ó RAG: —Ç–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å
    ‚Ä¢ –° RAG: –≤–æ–ø—Ä–æ—Å + —Ç–æ–ø-K —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
    ‚Üì
–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º
    ‚Üì
bot.sendMessage() ‚Üí User
```

---

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Java 17+** (OpenJDK 17.0.1)
- **Kotlin 2.2.10**
- **Gradle 8.14**
- **Node.js** (–¥–ª—è MCP HTTP —Å–µ—Ä–≤–µ—Ä–æ–≤)
- **Python 3.12+** (–¥–ª—è MCP Stdio —Å–µ—Ä–≤–µ—Ä–∞)
- **Ollama** (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM –∏ embeddings)
- **Docker Desktop** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è Docker MCP tools)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama

### macOS
```bash
brew install ollama
ollama serve

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
ollama pull llama3.2:1b       # –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
ollama pull nomic-embed-text  # –¥–ª—è embeddings
```

### Linux
```bash
curl -fsSL https://ollama.com/install.sh | sh
ollama serve

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
ollama pull llama3.2:1b
ollama pull nomic-embed-text
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ config.properties

```bash
cp config.properties.template config.properties
```

### 2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ `config.properties` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```properties
# –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
telegram.token=YOUR_TELEGRAM_BOT_TOKEN

# –ö–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ GigaChat –≤ —Ñ–æ—Ä–º–∞—Ç–µ Base64
gigachat.authKey=YOUR_GIGACHAT_AUTH_KEY

# –ë–∞–∑–æ–≤—ã–π URL GigaChat API
gigachat.baseUrl=https://gigachat.devices.sberbank.ru

# –ú–æ–¥–µ–ª—å GigaChat
gigachat.model=GigaChat
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

#### Telegram Bot Token
1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `telegram.token`

#### GigaChat Auth Key
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ GigaChat (https://developers.sber.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (Authorization Key) –≤ —Ñ–æ—Ä–º–∞—Ç–µ Base64
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `gigachat.authKey`

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

### HTTP MCP Servers (Node.js)

```bash
# Weather server
cd mcp-weather-server
npm install

# Reminders server
cd ../mcp-reminders-server
npm install

# Chuck Norris jokes server
cd ../mcp-chuck-server
npm install
```

–°–µ—Ä–≤–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –±–æ—Ç–æ–º –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 3001-3003.

### Stdio MCP Server (Python - Docker)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pipx (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
brew install pipx  # macOS
# –∏–ª–∏
sudo apt install pipx  # Linux

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å mcp-server-docker
pipx install mcp-server-docker
pipx ensurepath

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
which mcp-server-docker

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop
open -a Docker  # macOS
```

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
export JAVA_HOME=/Users/dmitriikonovalov/Library/Java/JavaVirtualMachines/openjdk-17.0.1/Contents/Home
./gradlew build
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
BUILD SUCCESSFUL in 9s
5 actionable tasks: 5 executed
```

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
export JAVA_HOME=/Users/dmitriikonovalov/Library/Java/JavaVirtualMachines/openjdk-17.0.1/Contents/Home
./gradlew run
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞

**–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:**
```
=== –ó–∞–ø—É—Å–∫ TeleGaGa –±–æ—Ç–∞ ===
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
HTTP –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω
GigaChat –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω
üßπ –û—á–∏—Å—Ç–∫–∞ –ø–æ—Ä—Ç–æ–≤ –æ—Ç —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤...
‚úÖ weather: 1 tools on port 3001
‚úÖ reminders: 3 tools on port 3002
‚úÖ chuck: 1 tools on port 3003
‚úÖ –í—Å–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
‚úÖ MCP —Å–µ—Ä–≤–∏—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
üïê ReminderScheduler –∑–∞–ø—É—â–µ–Ω
Health Check —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 12222
Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –æ–∂–∏–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
```

### Health Check

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞:
```bash
curl http://localhost:12222/
# –û—Ç–≤–µ—Ç: "Bot OK"
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–ê–ñ–ù–û:** –§–∞–π–ª `config.properties` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`.

- **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `config.properties` –≤ git
- –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å —Ç–æ–∫–µ–Ω–∞–º–∏ —Å —Ç—Ä–µ—Ç—å–∏–º–∏ –ª–∏—Ü–∞–º–∏
- –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏—Ö –æ–±–Ω–æ–≤–∏—Ç–µ

---

# MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –ß—Ç–æ —Ç–∞–∫–æ–µ MCP

Model Context Protocol (MCP) - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (tools). TeleGaGa –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç function calling —á–µ—Ä–µ–∑ **5 MCP —Å–µ—Ä–≤–µ—Ä–æ–≤** –ø–æ –¥–≤—É–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### HTTP MCP Servers (Node.js)

#### 1. get_weather (mcp-weather-server, port 3001)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã –¥–ª—è –ª—é–±–æ–≥–æ –≥–æ—Ä–æ–¥–∞ —á–µ—Ä–µ–∑ wttr.in

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `city` (string) - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
- `lang` (string, optional) - —è–∑—ã–∫ –æ—Ç–≤–µ—Ç–∞ ("ru" –∏–ª–∏ "en")

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```
User: –ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ?
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç get_weather —Å city="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", lang="ru"]
```

#### 2. create_reminder (mcp-reminders-server, port 3002)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `chatId` (string) - ID —á–∞—Ç–∞
- `dueDate` (string) - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `text` (string) - —Ç–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```
User: –ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç create_reminder —Å dueDate="2026-02-05", text="–∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"]
```

#### 3. get_reminders (mcp-reminders-server, port 3002)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `chatId` (string) - ID —á–∞—Ç–∞
- `startDate` (string) - –Ω–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (YYYY-MM-DD)
- `endDate` (string) - –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (YYYY-MM-DD)

**–ü—Ä–∏–º–µ—Ä:**
```
User: –ß—Ç–æ —É –º–µ–Ω—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è?
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç get_reminders —Å startDate=—Å–µ–≥–æ–¥–Ω—è, endDate=—Å–µ–≥–æ–¥–Ω—è]
```

#### 4. delete_reminder (mcp-reminders-server, port 3002)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `chatId` (string) - ID —á–∞—Ç–∞
- `reminderId` (string) - ID –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:**
```
User: –£–¥–∞–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –º–æ–ª–æ–∫–æ
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç get_reminders ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç ID ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç delete_reminder]
```

#### 5. get_chuck_norris_joke (mcp-chuck-server, port 3003)
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π —à—É—Ç–∫–∏ –ø—Ä–æ –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞ (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –Ω–µ—Ç

**–ü—Ä–∏–º–µ—Ä:**
```
User: –†–∞—Å—Å–∫–∞–∂–∏ —à—É—Ç–∫—É –ø—Ä–æ –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç get_chuck_norris_joke ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫—É—é —à—É—Ç–∫—É ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ —Ä—É—Å—Å–∫–∏–π]
```

**–í–∞–∂–Ω–æ:** LLM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —à—É—Ç–∫–∏ —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —Å–æ–≥–ª–∞—Å–Ω–æ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –ø—Ä–æ–º–ø—Ç—É.

### Stdio MCP Server (Python)

#### Docker MCP (mcp-server-docker)
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 7 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker:

1. **compose_create** - —Å–æ–∑–¥–∞–Ω–∏–µ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. **compose_spec** - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. **compose_apply** - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–∑–∞–ø—É—Å—Ç–∏—Ç—å)
4. **compose_down** - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
5. **docker_ps** - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
6. **docker_images** - –ø–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—Ä–∞–∑—ã
7. **docker_logs** - –ø–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ü—Ä–∏–º–µ—Ä:**
```
User: –ó–∞–ø—É—Å—Ç–∏ Caddy —Å–µ—Ä–≤–µ—Ä
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç compose_create ‚Üí compose_apply]

User: –ü–æ–∫–∞–∂–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç docker_ps]

User: –û—Å—Ç–∞–Ω–æ–≤–∏ Caddy
Bot: [–≤—ã–∑—ã–≤–∞–µ—Ç compose_down]
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç function calling

### –ê–ª–≥–æ—Ä–∏—Ç–º tool calling

```
1. User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
   ‚Üì
2. ChatOrchestrator –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP —Ñ—É–Ω–∫—Ü–∏–π
   ‚Üì
3. GigaChat –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å functions=[...] –∏ functionCall="auto"
   ‚Üì
4. –ï—Å–ª–∏ GigaChat —Ä–µ—à–∞–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:
   - finish_reason = "function_call"
   - GigaChatFunctionCall —Å–æ–¥–µ—Ä–∂–∏—Ç: name, arguments
   ‚Üì
5. ToolCallHandler –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —á–µ—Ä–µ–∑ MCP
   ‚Üì
6. –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é —Å role="function"
   ‚Üì
7. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ GigaChat —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π
   ‚Üì
8. [–ü–æ–≤—Ç–æ—Ä—è—Ç—å —à–∞–≥–∏ 4-7 –¥–æ max 5 –∏—Ç–µ—Ä–∞—Ü–∏–π]
   ‚Üì
9. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

### –ü—Ä–∏–º–µ—Ä —Ü–∏–∫–ª–∞ tool calling

**User:** "–ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≥–æ–¥—É –≤ –ú–æ—Å–∫–≤–µ –∏ —Ä–∞—Å—Å–∫–∞–∂–∏ —à—É—Ç–∫—É"

**–ò—Ç–µ—Ä–∞—Ü–∏—è 1:**
- GigaChat –≤—ã–∑—ã–≤–∞–µ—Ç `create_reminder`
- –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏—é

**–ò—Ç–µ—Ä–∞—Ü–∏—è 2:**
- GigaChat –≤—ã–∑—ã–≤–∞–µ—Ç `get_weather`
- –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏—é

**–ò—Ç–µ—Ä–∞—Ü–∏—è 3:**
- GigaChat –≤—ã–∑—ã–≤–∞–µ—Ç `get_chuck_norris_joke`
- –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏—é

**–ò—Ç–µ—Ä–∞—Ü–∏—è 4:**
- GigaChat —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- finish_reason = "stop"
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å MCP

### –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ chatId –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç

–í `ChatOrchestrator.kt`:
```kotlin
val contextMessage = GigaChatMessage(
    role = "system",
    content = """
–í–ê–ñ–ù–û: –¢–≤–æ–π chatId = $chatId.
–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç chatId –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö create_reminder, get_reminders, delete_reminder.
–ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–≥–∏–µ chatId.
    """.trimIndent()
)
history.add(1, contextMessage)  // –í—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
```

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏.

### –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ MCP

–ö–∞–∂–¥—ã–π MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
- –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å YYYY-MM-DD
- chatId –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º

## Troubleshooting MCP

### –ü—Ä–æ–±–ª–µ–º–∞: MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–≤
curl http://localhost:3001/healthz  # weather
curl http://localhost:3002/healthz  # reminders
curl http://localhost:3003/healthz  # chuck

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
lsof -ti:3001 && echo "weather OK" || echo "weather DEAD"
lsof -ti:3002 && echo "reminders OK" || echo "reminders DEAD"
lsof -ti:3003 && echo "chuck OK" || echo "chuck DEAD"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞
/listTools  # –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ npm dependencies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –∫–∞–∂–¥–æ–π –ø–∞–ø–∫–µ mcp-*-server
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞:
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "‚úÖ weather: X tools on port 3001"
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "‚úÖ reminders: X tools on port 3002"
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "‚úÖ chuck: X tools on port 3003"
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ (–ø–æ—Ä—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è)

### –ü—Ä–æ–±–ª–µ–º–∞: Docker MCP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker
docker ps  # –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É mcp-server-docker
which mcp-server-docker
pipx list | grep mcp-server-docker
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å mcp-server-docker: `pipx install mcp-server-docker`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Python –≤–µ—Ä—Å–∏—é: `python --version` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 3.12+)

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

**–ü—Ä–∏—á–∏–Ω—ã:**
- MCP —Ä–µ–∂–∏–º –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è —á–∞—Ç–∞
- –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/enableMcp` (—Ö–æ—Ç—è MCP –∞–∫—Ç–∏–≤–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ –ª–æ–≥–∞—Ö –µ—Å—Ç—å `functions=5` –≤ –∑–∞–ø—Ä–æ—Å–µ –∫ GigaChat
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —è–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: "–ü–æ–ª—É—á–∏ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ..." –≤–º–µ—Å—Ç–æ "–†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ –ø–æ–≥–æ–¥—É..."

---

# RAG —Å–∏—Å—Ç–µ–º–∞

## –ß—Ç–æ —Ç–∞–∫–æ–µ RAG

Retrieval-Augmented Generation (RAG) - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è —É–ª—É—á—à–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –ø—É—Ç–µ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å TeleGaGa:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –±–∞–∑–µ Ollama - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –ø–ª–∞—Ç–Ω—ã—Ö API.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ RAG

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã RAG —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Telegram User                         ‚îÇ
‚îÇ         /testRag, /compareRag, /setThreshold            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   RagService                            ‚îÇ
‚îÇ  1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embedding –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ (Ollama)           ‚îÇ
‚îÇ  2. –ü–æ–∏—Å–∫ —Ç–æ–ø-K —á–∞–Ω–∫–æ–≤ –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É         ‚îÇ
‚îÇ  3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏                 ‚îÇ
‚îÇ  4. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Ollama Client                          ‚îÇ
‚îÇ  –ó–∞–ø—Ä–æ—Å—ã –∫ llama3.2:1b —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ RAG             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------|------------|
| **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** | `rag_docs/readme.md` | Markdown –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ |
| **–í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î** | `embeddings_store/<filename>.embeddings.json` | –•—Ä–∞–Ω–∏–ª–∏—â–µ embeddings (1.3MB, 63+ —á–∞–Ω–∫–∞) |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** | `chat_settings/<chatId>_settings.json` | –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –¥—Ä. |

## RAG –∫–æ–º–∞–Ω–¥—ã

### /createEmbeddings

–°–æ–∑–¥–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª `rag_docs/readme.md`
2. –ü—Ä–µ–¥–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç Markdown (—É–¥–∞–ª—è–µ—Ç –∫–æ–¥-–±–ª–æ–∫–∏)
3. –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ –ø–æ 200 —Å–∏–º–≤–æ–ª–æ–≤ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º 50
4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç embeddings —á–µ—Ä–µ–∑ Ollama (–º–æ–¥–µ–ª—å `nomic-embed-text`)
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `embeddings_store/readme.embeddings.json`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
‚úÖ Embeddings —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚Ä¢ –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: readme.md
‚Ä¢ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 12847 —Å–∏–º–≤–æ–ª–æ–≤
‚Ä¢ –°–æ–∑–¥–∞–Ω–æ —á–∞–Ω–∫–æ–≤: 63
‚Ä¢ –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤: 768
‚Ä¢ –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 45.3 —Å–µ–∫

üíæ –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω:
embeddings_store/readme.embeddings.json

üìù Preview –ø–µ—Ä–≤–æ–≥–æ —á–∞–Ω–∫–∞:
"# CLAUDE.md

This file provides guidance to Claude Code..."
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Ollama –∑–∞–ø—É—â–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞
- –ú–æ–¥–µ–ª—å `nomic-embed-text` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: `ollama pull nomic-embed-text`

---

### /testRag <–≤–æ–ø—Ä–æ—Å>

–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏ —Å RAG –∏ –±–µ–∑ RAG.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. **–ü–æ–∏—Å–∫ —á–∞–Ω–∫–æ–≤**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç embedding –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ –∏ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–ø-5 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
2. **–û—Ç–≤–µ—Ç –ë–ï–ó RAG**: –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ Ollama (llama3.2:1b)
3. **–û—Ç–≤–µ—Ç –° RAG**: –ó–∞–ø—Ä–æ—Å + —Ç–æ–ø-5 —á–∞–Ω–∫–æ–≤ –≤ Ollama
4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–∞ –æ—Ç–≤–µ—Ç–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ —Ç–æ–∫–µ–Ω–æ–≤

**–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:**
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
ü§ñ –û–¢–í–ï–¢ –ë–ï–ó RAG:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[–û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏ –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üß† –û–¢–í–ï–¢ –° RAG (—Ç–æ–ø-5 —á–∞–Ω–∫–æ–≤):
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[–û—Ç–≤–µ—Ç –º–æ–¥–µ–ª–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏]

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

–ù–∞–π–¥–µ–Ω–Ω—ã–µ —á–∞–Ω–∫–∏:
1. –ß–∞–Ω–∫ #12: 0.8543 (85%)
2. –ß–∞–Ω–∫ #34: 0.7892 (79%)
3. –ß–∞–Ω–∫ #7: 0.7234 (72%)
4. –ß–∞–Ω–∫ #45: 0.6891 (69%)
5. –ß–∞–Ω–∫ #23: 0.6543 (65%)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤ (Ollama):
‚Ä¢ –ë–µ–∑ RAG: 245 —Ç–æ–∫–µ–Ω–æ–≤
‚Ä¢ –° RAG: 672 —Ç–æ–∫–µ–Ω–æ–≤ (+174% –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí° –í–´–í–û–î:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ RAG –ø–æ–º–æ–≥: –Ω–∞–π–¥–µ–Ω—ã –≤—ã—Å–æ–∫–æ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ (78%)
–û—Ç–≤–µ—Ç –° RAG –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ—á–Ω–µ–µ –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–µ–µ.
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏:**
- ‚úÖ **RAG –ø–æ–º–æ–≥** (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å ‚â•70%) - –Ω–∞–π–¥–µ–Ω—ã —Ç–æ—á–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
- ‚ö†Ô∏è **RAG —á–∞—Å—Ç–∏—á–Ω–æ –ø–æ–º–æ–≥** (50-70%) - –Ω–∞–π–¥–µ–Ω—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
- ‚ùå **RAG –Ω–µ –ø–æ–º–æ–≥** (<50%) - –≤–æ–ø—Ä–æ—Å –≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

### /compareRag <–≤–æ–ø—Ä–æ—Å> (–ù–û–í–ò–ù–ö–ê - –î–µ–Ω—å 18)

–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç **3 –ø–æ–¥—Ö–æ–¥–∞** –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤:
1. **–ë–ï–ó RAG** - –ø—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. **–° RAG (—Ç–æ–ø-5, –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞)** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 5 –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
3. **–° RAG + –§–ò–õ–¨–¢–†** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —á–∞–Ω–∫–∏ –≤—ã—à–µ –ø–æ—Ä–æ–≥–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

**–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:**
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä –°–†–ê–í–ù–ï–ù–ò–ï –¢–†–ï–• –ü–û–î–•–û–î–û–í RAG
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üîç –í–æ–ø—Ä–æ—Å: –ö–∞–∫–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è?

‚îÅ‚îÅ‚îÅ 1Ô∏è‚É£ –ë–ï–ó RAG ‚îÅ‚îÅ‚îÅ
[–û—Ç–≤–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞]
‚è±Ô∏è –í—Ä–µ–º—è: 1234ms

‚îÅ‚îÅ‚îÅ 2Ô∏è‚É£ RAG (—Ç–æ–ø-5, –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞) ‚îÅ‚îÅ‚îÅ
[–û—Ç–≤–µ—Ç —Å —Ç–æ–ø-5 —á–∞–Ω–∫–∞–º–∏]

üìä –ß–∞–Ω–∫–∏:
   1. –ß–∞–Ω–∫ #23: 0.7500 (75%)
   2. –ß–∞–Ω–∫ #45: 0.6800 (68%)
   3. –ß–∞–Ω–∫ #12: 0.4200 (42%)
   4. –ß–∞–Ω–∫ #89: 0.3500 (35%)
   5. –ß–∞–Ω–∫ #67: 0.2800 (28%)
‚è±Ô∏è –í—Ä–µ–º—è: 2345ms

‚îÅ‚îÅ‚îÅ 3Ô∏è‚É£ RAG + –§–ò–õ–¨–¢–† (‚â•0.5) ‚îÅ‚îÅ‚îÅ
[–û—Ç–≤–µ—Ç —Å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —á–∞–Ω–∫–∞–º–∏]

üìä –ß–∞–Ω–∫–∏:
   –ù–∞–π–¥–µ–Ω–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤: 5
   –ü—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä: 2
   –°—Ä–µ–¥–Ω—è—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: 0.7150
   1. –ß–∞–Ω–∫ #23: 0.7500 (75%)
   2. –ß–∞–Ω–∫ #45: 0.6800 (68%)
‚è±Ô∏è –í—Ä–µ–º—è: 1789ms

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí° –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ –§–∏–ª—å—Ç—Ä –æ—Ç—Å–µ–∫ 3 –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   –û—Ç–≤–µ—Ç 3 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ—á–Ω–µ–µ –æ—Ç–≤–µ—Ç–∞ 2

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /setThreshold –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑:**
- –ï—Å–ª–∏ filteredCount == 0: "‚ùå –§–∏–ª—å—Ç—Ä –æ—Ç—Å–µ–∫ –≤—Å–µ —á–∞–Ω–∫–∏"
- –ï—Å–ª–∏ filteredCount < originalCount: "‚úÖ –§–∏–ª—å—Ç—Ä –æ—Ç—Å–µ–∫ N –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤"
- –ï—Å–ª–∏ filteredCount == originalCount: "‚úÖ –í—Å–µ —á–∞–Ω–∫–∏ –ø—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä - –≤—ã—Å–æ–∫–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å"

---

### /setThreshold <0.0-1.0> (–ù–û–í–ò–ù–ö–ê - –î–µ–Ω—å 18)

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è RAG —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

**–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ—Ä–æ–≥:**
```
/setThreshold
```

**–û—Ç–≤–µ—Ç:**
```
üìä –¢–µ–∫—É—â–∏–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏: 0.5

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /setThreshold <–∑–Ω–∞—á–µ–Ω–∏–µ>
–î–∏–∞–ø–∞–∑–æ–Ω: 0.0 - 1.0

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
‚Ä¢ 0.3-0.4 (–Ω–∏–∑–∫–∏–π) - –±–æ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –º–æ–∂–µ—Ç –±—ã—Ç—å —à—É–º
‚Ä¢ 0.5-0.6 (—Å—Ä–µ–¥–Ω–∏–π) - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
‚Ä¢ 0.7-0.8 (–≤—ã—Å–æ–∫–∏–π) - —Ç–æ–ª—å–∫–æ –≤—ã—Å–æ–∫–æ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏
```

**–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥:**
```
/setThreshold 0.6
```

**–û—Ç–≤–µ—Ç:**
```
‚úÖ –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω: 0.6

–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:
‚Ä¢ –°—Ä–µ–¥–Ω–∏–π –ø–æ—Ä–æ–≥ - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å –ø–æ–º–æ—â—å—é /compareRag <–≤–æ–ø—Ä–æ—Å>
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –ø–æ—Ä–æ–≥–∞:**

| –ü–æ—Ä–æ–≥ | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
|-------|---------------|------------|--------------|
| 0.3-0.4 | –ù–∏–∑–∫–∏–π | –ë–æ–ª—å—à–µ —á–∞–Ω–∫–æ–≤, –º–æ–∂–µ—Ç –±—ã—Ç—å —à—É–º | –î–ª—è —à–∏—Ä–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ |
| 0.5-0.6 | –°—Ä–µ–¥–Ω–∏–π | –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ | **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| 0.7-0.8 | –í—ã—Å–æ–∫–∏–π | –¢–æ–ª—å–∫–æ –≤—ã—Å–æ–∫–æ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ | –î–ª—è —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ |
| 0.9+ | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π | –ú–∏–Ω–∏–º—É–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | –î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è |

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ RAG

### –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫

**–ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞:**
```
cosine_similarity(A, B) = (A ¬∑ B) / (||A|| √ó ||B||)

–≥–¥–µ:
A ¬∑ B = —Å–∫–∞–ª—è—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤
||A|| = –Ω–æ—Ä–º–∞ –≤–µ–∫—Ç–æ—Ä–∞ A (sqrt(sum(a_i^2)))
||B|| = –Ω–æ—Ä–º–∞ –≤–µ–∫—Ç–æ—Ä–∞ B (sqrt(sum(b_i^2)))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1]
- `1.0` - –≤–µ–∫—Ç–æ—Ä—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã (100% —Å—Ö–æ–¥—Å—Ç–≤–æ)
- `0.5` - —É–º–µ—Ä–µ–Ω–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ (50%)
- `0.0` - –≤–µ–∫—Ç–æ—Ä—ã –æ—Ä—Ç–æ–≥–æ–Ω–∞–ª—å–Ω—ã (0% —Å—Ö–æ–¥—Å—Ç–≤–æ)

**–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤:** 768 (–º–æ–¥–µ–ª—å nomic-embed-text)

**–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞:**
1. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö embeddings –∏–∑ JSON (63+ —á–∞–Ω–∫–∞)
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embedding –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ (768-–º–µ—Ä–Ω—ã–π –≤–µ–∫—Ç–æ—Ä)
3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞ —Å –∫–∞–∂–¥—ã–º —á–∞–Ω–∫–æ–º
4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥—É (‚â• ragRelevanceThreshold)
6. –í–æ–∑–≤—Ä–∞—Ç —Ç–æ–ø-K –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –§–∏–ª—å—Ç—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (–î–µ–Ω—å 18)

**–ü—Ä–æ–±–ª–µ–º–∞ –¥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏–ª —Ç–æ–ø-5 —á–∞–Ω–∫–æ–≤
- –í–°–ï —á–∞–Ω–∫–∏ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –≤ LLM, –¥–∞–∂–µ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ —à—É–º –∏ —É—Ö—É–¥—à–∞–ª–æ –æ—Ç–≤–µ—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
–î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
1. –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí —Ç–æ–ø-K –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
2. **–§–∏–ª—å—Ç—Ä** ‚Üí –æ—Ç—Å–µ–∫–∞–µ—Ç —á–∞–Ω–∫–∏ —Å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é < –ø–æ—Ä–æ–≥–∞
3. –¢–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ ‚Üí LLM

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–µ–Ω—å—à–µ —à—É–º–∞ ‚Üí —Ç–æ—á–Ω–µ–µ –æ—Ç–≤–µ—Ç—ã
- –ú–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ ‚Üí –±—ã—Å—Ç—Ä–µ–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –±–∞–ª–∞–Ω—Å

**–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:** < 10ms (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –ø–∞–º—è—Ç–∏)

### –ß–∞–Ω–∫–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: 200 —Å–∏–º–≤–æ–ª–æ–≤
- –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (overlap): 50 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞: —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥-–±–ª–æ–∫–æ–≤, —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –∞–±–∑–∞—Ü—ã

**–ü—Ä–∏–º–µ—Ä —á–∞–Ω–∫–∞:**
```json
{
  "text": "# CLAUDE.md\n\nThis file provides guidance...",
  "embedding": [-0.059, -0.292, -2.586, ...],
  "index": 0
}
```

### –ú–æ–¥–µ–ª–∏ Ollama

| –ú–æ–¥–µ–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –†–∞–∑–º–µ—Ä | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|--------|------------|--------|-----------|
| **nomic-embed-text:latest** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings | 274MB | 137M |
| **llama3.2:1b** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ | 1.3GB | 1.2B |

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embeddings (readme.md, 63 —á–∞–Ω–∫–∞):**
- –õ–æ–∫–∞–ª—å–Ω–æ (Ollama): ~45 —Å–µ–∫—É–Ω–¥
- CPU: Intel/Apple Silicon (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∂–µ–ª–µ–∑–∞)
- RAM: ~2GB –¥–ª—è –º–æ–¥–µ–ª–∏ nomic-embed-text

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è /testRag:**
- –ü–æ–∏—Å–∫ —á–∞–Ω–∫–æ–≤: ~1-2 —Å–µ–∫—É–Ω–¥—ã
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –ë–ï–ó RAG: ~3-5 —Å–µ–∫—É–Ω–¥
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –° RAG: ~5-10 —Å–µ–∫—É–Ω–¥ (–±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤)
- **–ò—Ç–æ–≥–æ:** ~10-20 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è /compareRag:**
- 3 –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ~20-30 —Å–µ–∫—É–Ω–¥
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: < 10ms

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAG

### –ü—Ä–∏–º–µ—Ä 1: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å (RAG –ø–æ–º–æ–≥–∞–µ—Ç)

**–í–æ–ø—Ä–æ—Å:** `/testRag –ö–∞–∫–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ?`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–µ–∑ RAG: –û–±—â–∏–π –æ—Ç–≤–µ—Ç –∏–ª–∏ "–Ω–µ –∑–Ω–∞—é"
- –° RAG: –¢–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 5 MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: ~85-90%

### –ü—Ä–∏–º–µ—Ä 2: –í–æ–ø—Ä–æ—Å –≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (RAG –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç)

**–í–æ–ø—Ä–æ—Å:** `/testRag –ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ —Å–µ–≥–æ–¥–Ω—è?`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–µ–∑ RAG: "–Ø –Ω–µ –∑–Ω–∞—é —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É"
- –° RAG: –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç (–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–≥–æ–¥–µ)
- –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: ~20-30%

### –ü—Ä–∏–º–µ—Ä 3: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

**–í–æ–ø—Ä–æ—Å:** `/compareRag –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ RAG`

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ—Ä–æ–≥–æ–º 0.5:**
- –ü–æ–¥—Ö–æ–¥ 1 (–ë–ï–ó RAG): –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ RAG
- –ü–æ–¥—Ö–æ–¥ 2 (RAG –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞): 5 —á–∞–Ω–∫–æ–≤ (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å 0.72, 0.65, 0.48, 0.35, 0.28)
- –ü–æ–¥—Ö–æ–¥ 3 (RAG + —Ñ–∏–ª—å—Ç—Ä): 2 —á–∞–Ω–∫–∞ (–æ—Ç—Å–µ—á–µ–Ω—ã 3 –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö)
- **–ê–Ω–∞–ª–∏–∑:** "‚úÖ –§–∏–ª—å—Ç—Ä –æ—Ç—Å–µ–∫ 3 –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤"

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è RAG

1. **–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤**: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (200 —Å–∏–º–≤–æ–ª–æ–≤), –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
2. **–¢–æ–ø-K**: –í—Å–µ–≥–¥–∞ 5 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
3. **–û–¥–Ω–∞ –±–∞–∑–∞**: –¢–æ–ª—å–∫–æ `readme.md`, –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
4. **–Ø–∑—ã–∫**: –õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∞–Ω–≥–ª–∏–π—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º (–º–æ–¥–µ–ª—å –æ–±—É—á–∞–ª–∞—Å—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç LLM**: llama3.2:1b - –Ω–µ–±–æ–ª—å—à–∞—è –º–æ–¥–µ–ª—å, –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –¥–µ—Ç–∞–ª–∏

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è RAG

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ
- [ ] LLM-based Reranker –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ (–∞–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏)
- [ ] –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π + BM25 keyword-based)
- [ ] –ö–æ–º–∞–Ω–¥–∞ /ragStats –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] –ú–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–π RAG (–ø–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º)

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ
- [ ] –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —á–∞–Ω–∫–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–∞–∑–±–∏–µ–Ω–∏–µ –ø–æ —Å–º—ã—Å–ª—É, –∞ –Ω–µ –ø–æ —Å–∏–º–≤–æ–ª–∞–º)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –º–æ—â–Ω–æ–π –º–æ–¥–µ–ª–∏ (llama3:8b)
- [ ] –ì—Ä–∞—Ñ–æ–≤–∞—è RAG (—Å–≤—è–∑–∏ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ embeddings –≤–æ–ø—Ä–æ—Å–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

---

# –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π —á–µ—Ä–µ–∑ Telegram.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### 1. MCP Reminders Server (Node.js)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `mcp-reminders-server/`

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç 3 MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
- `create_reminder` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- `get_reminders` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `delete_reminder` - —É–¥–∞–ª–µ–Ω–∏–µ/–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:** `mcp-reminders-server/storage/<chatId>.json`
- –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ chatId
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 2. ChatSettingsManager

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:** `chat_settings/<chatId>_settings.json`

```kotlin
data class ChatSettings(
    val chatId: Long,
    val temperature: Float = 0.87F,
    val reminderTime: String? = null,        // HH:mm —Ñ–æ—Ä–º–∞—Ç
    val reminderEnabled: Boolean = false,
    val lastReminderSent: String? = null,    // ISO 8601 timestamp

    // RAG –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–î–µ–Ω—å 18)
    val ragRelevanceThreshold: Float = 0.5F,
    val ragEnabled: Boolean = true,
    val ragTopK: Int = 5
)
```

### 3. ReminderScheduler

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/main/kotlin/ru/dikoresearch/domain/ReminderScheduler.kt`

–§–æ–Ω–æ–≤—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å –µ–∂–µ–º–∏–Ω—É—Ç–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –≤ –æ–¥–∏–Ω –¥–µ–Ω—å
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM + MCP –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## –ö–æ–º–∞–Ω–¥—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### /setReminderTime HH:mm

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.

**–ü—Ä–∏–º–µ—Ä:**
```
/setReminderTime 09:00
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:00
- reminderEnabled = true
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –§–æ—Ä–º–∞—Ç HH:mm (00:00 –¥–æ 23:59)
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: `^([01]\d|2[0-3]):([0-5]\d)$`

### /disableReminders

–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- üîï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã
- reminderEnabled = false
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### /enableMcp

–í–∫–ª—é—á–µ–Ω–∏–µ MCP —Ä–µ–∂–∏–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏.

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:**
- "–ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"
- "–ß—Ç–æ —É –º–µ–Ω—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è?"
- "–£–¥–∞–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –≤—Å—Ç—Ä–µ—á—É"

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** MCP –∞–∫—Ç–∏–≤–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤.

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

```
1. User: "–ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"
   ‚Üì
2. ChatOrchestrator –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å chatId –∏ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π
   ‚Üì
3. GigaChat –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å
   - –ü–æ–Ω–∏–º–∞–µ—Ç "–∑–∞–≤—Ç—Ä–∞" –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
   - –í—ã—á–∏—Å–ª—è–µ—Ç dueDate = 2026-02-05
   ‚Üì
4. GigaChat –≤—ã–∑—ã–≤–∞–µ—Ç create_reminder —á–µ—Ä–µ–∑ MCP
   - arguments: {"chatId":"123", "dueDate":"2026-02-05", "text":"–∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"}
   ‚Üì
5. MCP —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ storage/<chatId>.json
   ‚Üì
6. –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: "‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–∞ –∑–∞–≤—Ç—Ä–∞"
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (—É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)

```
1. ReminderScheduler –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
   ‚Üì
2. –ù–∞—Ö–æ–¥–∏—Ç —á–∞—Ç—ã —Å reminderTime = —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (09:00)
   ‚Üì
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —Å–µ–≥–æ–¥–Ω—è –µ—â–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ (lastReminderSent != —Å–µ–≥–æ–¥–Ω—è)
   ‚Üì
4. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è ChatOrchestrator:
   "–ò—Å–ø–æ–ª—å–∑—É–π get_reminders –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–ª –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.
    –ò—Å–ø–æ–ª—å–∑—É–π get_weather –¥–ª—è –ø–æ–≥–æ–¥—ã –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ.
    –ò—Å–ø–æ–ª—å–∑—É–π get_chuck_norris_joke –¥–ª—è —à—É—Ç–∫–∏ –¥–Ω—è."
   ‚Üì
5. ChatOrchestrator –≤—ã–∑—ã–≤–∞–µ—Ç LLM —Å MCP
   ‚Üì
6. LLM –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç:
   - get_reminders (chatId, startDate=—Å–µ–≥–æ–¥–Ω—è, endDate=—Å–µ–≥–æ–¥–Ω—è)
   - get_weather (city="–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", lang="ru")
   - get_chuck_norris_joke ()
   ‚Üì
7. LLM —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏:
   "üåÖ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –í–æ—Ç —Ç–≤–æ–∏ –¥–µ–ª–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:
    1. üìù –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ
    2. üìù –ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ –≤ 10:00

    üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ:
    +3¬∞C, –æ–±–ª–∞—á–Ω–æ, –≤–ª–∞–∂–Ω–æ—Å—Ç—å 78%, –≤–µ—Ç–µ—Ä 5 –º/—Å

    üòÑ –®—É—Ç–∫–∞ –¥–Ω—è –æ—Ç –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞:
    [–ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–∞—è —à—É—Ç–∫–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º]"
   ‚Üì
8. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
   ‚Üì
9. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ lastReminderSent = "2026-02-04T09:00:00+03:00"
```

### –§–æ—Ä–º–∞—Ç —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

```
üåÖ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –í–æ—Ç —Ç–≤–æ–∏ –¥–µ–ª–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:

üìù –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:
1. –í 10:00 - –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ
2. –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
3. –í 15:00 - –≤—Å—Ç—Ä–µ—á–∞ —Å –∫–æ–º–∞–Ω–¥–æ–π

üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: +3¬∞C
–û–ø–∏—Å–∞–Ω–∏–µ: –û–±–ª–∞—á–Ω–æ —Å –ø—Ä–æ—è—Å–Ω–µ–Ω–∏—è–º–∏
–í–ª–∞–∂–Ω–æ—Å—Ç—å: 78%
–í–µ—Ç–µ—Ä: 5 –º/—Å (–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–Ω—ã–π)

üòÑ –®—É—Ç–∫–∞ –¥–Ω—è –æ—Ç –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞:
–ß–∞–∫ –ù–æ—Ä—Ä–∏—Å –º–æ–∂–µ—Ç –¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–æ–ª—å.

–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üåü
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π?

**–†–µ—à–µ–Ω–∏–µ:**
1. –ö–∞–∂–¥—ã–π chatId –∏–º–µ–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —Ö—Ä–∞–Ω–∏–ª–∏—â–∞: `storage/<chatId>.json`
2. MCP —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç chatId –≤–æ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ chatId –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç LLM

**–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤ ChatOrchestrator:**
```kotlin
val contextMessage = GigaChatMessage(
    role = "system",
    content = """
–í–ê–ñ–ù–û: –¢–≤–æ–π chatId = $chatId.
–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç chatId –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö create_reminder, get_reminders, delete_reminder.
–ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–≥–∏–µ chatId.

–¢–ï–ö–£–©–ê–Ø –î–ê–¢–ê –ò –í–†–ï–ú–Ø (timezone: Europe/Moscow):
- –î–∞—Ç–∞: 2026-02-04 (–≤—Ç–æ—Ä–Ω–∏–∫)
- –í—Ä–µ–º—è: 09:00:00

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å "—Å–µ–≥–æ–¥–Ω—è", "–∑–∞–≤—Ç—Ä–∞", "–ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞".
    """.trimIndent()
)
history.add(1, contextMessage)
```

–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏.

### –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- YYYY-MM-DD (ISO 8601)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ MCP —Å–µ—Ä–≤–µ—Ä–µ
- LLM –¥–æ–ª–∂–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã

**–ü—Ä–∏–º–µ—Ä—ã:**
- "—Å–µ–≥–æ–¥–Ω—è" ‚Üí 2026-02-04
- "–∑–∞–≤—Ç—Ä–∞" ‚Üí 2026-02-05
- "–ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞" ‚Üí 2026-02-06
- "–≤ –ø—è—Ç–Ω–∏—Ü—É" ‚Üí –±–ª–∏–∂–∞–π—à–∞—è –ø—è—Ç–Ω–∏—Ü–∞ –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã

**–í–∞–∂–Ω–æ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–∞—Ç LLM.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

```bash
# –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
/setReminderTime 09:00

# –®–∞–≥ 2: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å MCP (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω)
/enableMcp

# –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
User: –ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ
Bot: ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ (2026-02-05)

User: –ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –≤ –ø—è—Ç–Ω–∏—Ü—É –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ –≤ 10:00
Bot: ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–∞ –ø—è—Ç–Ω–∏—Ü—É (2026-02-07)
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

```bash
User: –ß—Ç–æ —É –º–µ–Ω—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è?
Bot: üìù –ù–∞ —Å–µ–≥–æ–¥–Ω—è (2026-02-04) —É —Ç–µ–±—è 2 –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:
     1. –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ
     2. –í 15:00 - –≤—Å—Ç—Ä–µ—á–∞ —Å –∫–æ–º–∞–Ω–¥–æ–π

User: –ü–æ–∫–∞–∂–∏ –º–æ–∏ –¥–µ–ª–∞ –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é
Bot: [–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–∞ –Ω–µ–¥–µ–ª—é]
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏

```bash
User: –£–¥–∞–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –º–æ–ª–æ–∫–æ
Bot: [–ù–∞—Ö–æ–¥–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –º–æ–ª–æ–∫–æ —á–µ—Ä–µ–∑ get_reminders]
     [–í—ã–∑—ã–≤–∞–µ—Ç delete_reminder —Å reminderId]
     ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –º–æ–ª–æ–∫–æ —É–¥–∞–ª–µ–Ω–æ

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
/disableReminders
Bot: üîï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞
cat chat_settings/<chatId>_settings.json

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "reminderTime": "09:00"
# "reminderEnabled": true
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ /setReminderTime –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ reminderEnabled = true
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (–±–µ–∑ —Å–ø–∞–º–∞, —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ MCP reminders —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç: `lsof -ti:3002`

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–∞—Ç–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä:** User –≥–æ–≤–æ—Ä–∏—Ç "—Å–µ–≥–æ–¥–Ω—è", –Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–∞ –≤—á–µ—Ä–∞.

**–ü—Ä–∏—á–∏–Ω–∞:** LLM –Ω–µ –∑–Ω–∞–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É.

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è –¥–∞—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ).

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ª–æ–≥–∞—Ö:**
```
üîß –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç...
–¢–ï–ö–£–©–ê–Ø –î–ê–¢–ê –ò –í–†–ï–ú–Ø (timezone: Europe/Moscow):
- –î–∞—Ç–∞: 2026-02-04 (–≤—Ç–æ—Ä–Ω–∏–∫)
- –í—Ä–µ–º—è: 09:00:00
```

### –ü—Ä–æ–±–ª–µ–º–∞: –®—É—Ç–∫–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

**–ü—Ä–∏—á–∏–Ω–∞:** Chuck Norris API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —à—É—Ç–∫–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º.

**–†–µ—à–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç McpEnabledRole —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é:

```
–ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç get_chuck_norris_joke:
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —à—É—Ç–∫–∏ –ù–ê –ê–ù–ì–õ–ò–ô–°–ö–û–ú —è–∑—ã–∫–µ
- –¢—ã –î–û–õ–ñ–ï–ù –ü–ï–†–ï–í–ï–°–¢–ò —à—É—Ç–∫—É –Ω–∞ –†–£–°–°–ö–ò–ô —è–∑—ã–∫
- –î–µ–ª–∞–π –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —é–º–æ—Ä–∞
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

---

# –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

## –û–±—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

### /start
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üëã –ü—Ä–∏–≤–µ—Ç! –Ø TeleGaGa –±–æ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π RAG.

ü§ñ AI –º–æ–¥–µ–ª–∏:
‚Ä¢ GigaChat - –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —á–∞—Ç–∞
‚Ä¢ Ollama (llama3.2:1b) - –ª–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚Ä¢ Ollama (nomic-embed-text) - –ª–æ–∫–∞–ª—å–Ω—ã–µ embeddings

üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/changeRole <—Ç–µ–∫—Å—Ç> - –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
/changeT <—á–∏—Å–ª–æ> - –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (0.0-1.0)
/clearChat - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞

üîß MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
/enableMcp - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å MCP —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–∫—Ç–∏–≤–µ–Ω)
/listTools - –ø–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

üß† RAG –∫–æ–º–∞–Ω–¥—ã:
/createEmbeddings - —Å–æ–∑–¥–∞—Ç—å embeddings –∏–∑ rag_docs/readme.md
/testRag <–≤–æ–ø—Ä–æ—Å> - —Å—Ä–∞–≤–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã —Å RAG –∏ –±–µ–∑ RAG
/compareRag <–≤–æ–ø—Ä–æ—Å> - —Å—Ä–∞–≤–Ω–∏—Ç—å 3 –ø–æ–¥—Ö–æ–¥–∞ (–±–µ–∑ RAG, RAG, RAG+—Ñ–∏–ª—å—Ç—Ä)
/setThreshold <0.0-1.0> - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

‚è∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏:
/setReminderTime HH:mm - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
/disableReminders - –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

üí° –î–ª—è —Ä–∞–±–æ—Ç—ã embeddings –Ω—É–∂–Ω–∞ –∑–∞–ø—É—â–µ–Ω–Ω–∞—è Ollama:
ollama pull nomic-embed-text
```

### /changeRole <text>
–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —á–∞—Ç–∞.

**–ü—Ä–∏–º–µ—Ä:**
```
/changeRole –¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ Kotlin —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω
- –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –æ—á–∏—â–∞–µ—Ç—Å—è
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è–º

### /changeT <float>
–ò–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –º–æ–¥–µ–ª–∏ (0.0 - 1.0).

**–ü—Ä–∏–º–µ—Ä:**
```
/changeT 0.5
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–æ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤: 0.5
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- 0.0-0.3: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã
- 0.4-0.7: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- 0.8-1.0: –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ, —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

**Default:** 0.87

### /clearChat
–û—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞
- –§–∞–π–ª `chat_history/<chatId>_history.json` —É–¥–∞–ª–µ–Ω
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ McpEnabledRole

## MCP –∫–æ–º–∞–Ω–¥—ã

### /enableMcp
–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç MCP —Ä–µ–∂–∏–º –¥–ª—è —á–∞—Ç–∞.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- MCP —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ McpEnabledRole
- –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ 5 MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** MCP –∞–∫—Ç–∏–≤–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤.

### /listTools
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–î–æ—Å—Ç—É–ø–Ω—ã–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (5):
‚Ä¢ get_weather
‚Ä¢ create_reminder
‚Ä¢ get_reminders
‚Ä¢ delete_reminder
‚Ä¢ get_chuck_norris_joke
```

**–ï—Å–ª–∏ MCP –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
```
MCP —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞.
```

## RAG –∫–æ–º–∞–Ω–¥—ã

### /createEmbeddings
–°–æ–∑–¥–∞–µ—Ç embeddings –∏–∑ `rag_docs/readme.md`.

–°–º. —Ä–∞–∑–¥–µ–ª [RAG —Å–∏—Å—Ç–µ–º–∞](#rag-—Å–∏—Å—Ç–µ–º–∞) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### /testRag <question>
–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã —Å RAG –∏ –±–µ–∑ RAG.

–°–º. —Ä–∞–∑–¥–µ–ª [RAG —Å–∏—Å—Ç–µ–º–∞](#rag-—Å–∏—Å—Ç–µ–º–∞) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### /compareRag <question>
–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç 3 –ø–æ–¥—Ö–æ–¥–∞ (–±–µ–∑ RAG, RAG, RAG+—Ñ–∏–ª—å—Ç—Ä).

–°–º. —Ä–∞–∑–¥–µ–ª [RAG —Å–∏—Å—Ç–µ–º–∞](#rag-—Å–∏—Å—Ç–µ–º–∞) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### /setThreshold <0.0-1.0>
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è RAG —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

–°–º. —Ä–∞–∑–¥–µ–ª [RAG —Å–∏—Å—Ç–µ–º–∞](#rag-—Å–∏—Å—Ç–µ–º–∞) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –ö–æ–º–∞–Ω–¥—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

### /setReminderTime HH:mm
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.

–°–º. —Ä–∞–∑–¥–µ–ª [–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π](#—Å–∏—Å—Ç–µ–º–∞-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

### /disableReminders
–û—Ç–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.

–°–º. —Ä–∞–∑–¥–µ–ª [–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π](#—Å–∏—Å—Ç–µ–º–∞-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
rm -rf chat_history/
rm -rf chat_settings/
rm -rf mcp-reminders-server/storage/

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
./gradlew clean build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
./gradlew run
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞

**–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
```
‚úÖ weather: 1 tools on port 3001
‚úÖ reminders: 3 tools on port 3002
‚úÖ chuck: 1 tools on port 3003
‚úÖ –í—Å–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
üïê ReminderScheduler –∑–∞–ø—É—â–µ–Ω
Telegram –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –æ–∂–∏–¥–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚ùå EADDRINUSE: address already in use
‚ùå Failed to initialize
‚ùå processesAlive=false
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥

#### –¢–µ—Å—Ç: /start
```
User: /start
Bot: [–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ + —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥]
```

#### –¢–µ—Å—Ç: /listTools
```
User: /listTools
Bot: –î–æ—Å—Ç—É–ø–Ω—ã–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (5):
     ‚Ä¢ get_weather
     ‚Ä¢ create_reminder
     ‚Ä¢ get_reminders
     ‚Ä¢ delete_reminder
     ‚Ä¢ get_chuck_norris_joke
```

#### –¢–µ—Å—Ç: /changeT
```
User: /changeT 0.5
Bot: –ù–æ–≤–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤: 0.5
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP: –ü–æ–≥–æ–¥–∞

```
User: –ö–∞–∫–∞—è –ø–æ–≥–æ–¥–∞ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ?
Bot: [–û—Ç–≤–µ—Ç —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π, –æ–ø–∏—Å–∞–Ω–∏–µ–º, –≤–ª–∞–∂–Ω–æ—Å—Ç—å—é, –≤–µ—Ç—Ä–æ–º]

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:
–ú–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª–∞ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏: get_weather
GigaChatFunctionCall(name=get_weather, arguments={"city":"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥","lang":"ru"})
```

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

```
User: –ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ
Bot: ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ...

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:
–ú–æ–¥–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª–∞ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏: create_reminder
GigaChatFunctionCall(name=create_reminder, arguments={"chatId":"...","dueDate":"2026-02-05",...})

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª:
cat mcp-reminders-server/storage/<chatId>.json
```

### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RAG

```
# –°–æ–∑–¥–∞—Ç—å embeddings
User: /createEmbeddings
Bot: ‚úÖ Embeddings —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã! [—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞]

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å RAG
User: /testRag –ö–∞–∫–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è?
Bot: [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG –∏ –±–µ–∑ RAG]

# –°—Ä–∞–≤–Ω–∏—Ç—å –ø–æ–¥—Ö–æ–¥—ã
User: /compareRag –ö–∞–∫–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è?
Bot: [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ 3 –ø–æ–¥—Ö–æ–¥–æ–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º]

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥
User: /setThreshold 0.6
Bot: ‚úÖ –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω: 0.6
```

### 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Scheduler'–∞

```
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –Ω–∞ +2 –º–∏–Ω—É—Ç—ã –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ
User: /setReminderTime 09:02
Bot: ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 09:02

# –°–æ–∑–¥–∞—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
User: –ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ —Å–µ–≥–æ–¥–Ω—è –∫—É–ø–∏—Ç—å —Ö–ª–µ–±
Bot: ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ

# –ß–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ:
Bot: üåÖ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –í–æ—Ç —Ç–≤–æ–∏ –¥–µ–ª–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:

     üìù –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:
     1. –ö—É–ø–∏—Ç—å —Ö–ª–µ–±

     üå§Ô∏è –ü–æ–≥–æ–¥–∞ –≤ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ:
     [–¥–∞–Ω–Ω—ã–µ –ø–æ–≥–æ–¥—ã]

     üòÑ –®—É—Ç–∫–∞ –¥–Ω—è –æ—Ç –ß–∞–∫–∞ –ù–æ—Ä—Ä–∏—Å–∞:
     [–ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–∞—è —à—É—Ç–∫–∞]
```

### 8. –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã –µ—Å–ª–∏:**

1. **MCP Integration**
   - –í—Å–µ 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
   - Function calling —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã MCP –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

2. **RAG —Å–∏—Å—Ç–µ–º–∞**
   - Embeddings —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏
   - –§–∏–ª—å—Ç—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - /compareRag –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –ø–æ–¥—Ö–æ–¥–∞–º–∏

3. **–õ–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π**
   - –î–∞—Ç—ã –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ ("—Å–µ–≥–æ–¥–Ω—è", "–∑–∞–≤—Ç—Ä–∞")
   - Scheduler –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è
   - –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ lastReminderSent)

4. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**
   - –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø–æ—Ä—Ç—ã –æ—á–∏—â–∞—é—Ç—Å—è)
   - –ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–æ–≤
   - Graceful shutdown —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

5. **UX**
   - –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö MCP markers
   - –ù–µ—Ç —Å–ø–∞–º–∞ –≤ –ª–æ–≥–∞—Ö
   - –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è gracefully

## –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–≥–∏
./gradlew run 2>&1 | tee bot.log

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ MCP –ª–æ–≥–∏
grep -E "(MCP|mcp|üîß|‚ö°|üîç)" bot.log

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ tool calls
grep -E "(functionCall|function_call)" bot.log

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å scheduler
grep -E "(Scheduler|–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π)" bot.log

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏
grep -E "(Error|error|‚ùå|Exception)" bot.log
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ MCP –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ 3 –ø—Ä–æ—Ü–µ—Å—Å–∞ –∂–∏–≤—ã
lsof -ti:3001 && echo "weather OK" || echo "weather DEAD"
lsof -ti:3002 && echo "reminders OK" || echo "reminders DEAD"
lsof -ti:3003 && echo "chuck OK" || echo "chuck DEAD"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞
cat chat_history/<chatId>_history.json | jq .

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞
cat chat_settings/<chatId>_settings.json | jq .

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
cat mcp-reminders-server/storage/<chatId>.json | jq .

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å embeddings
ls -lh embeddings_store/
cat embeddings_store/readme.embeddings.json | jq '.embeddings | length'
```

### –û—á–∏—Å—Ç–∫–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
rm -rf chat_history/ chat_settings/
rm -rf mcp-reminders-server/storage/
rm -rf embeddings_store/

# –£–±–∏—Ç—å –≤—Å–µ MCP –ø—Ä–æ—Ü–µ—Å—Å—ã
lsof -ti:3001 | xargs kill -9 2>/dev/null
lsof -ti:3002 | xargs kill -9 2>/dev/null
lsof -ti:3003 | xargs kill -9 2>/dev/null
```

---

# –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è

### –î–µ–Ω—å 1-10: –ë–∞–∑–æ–≤–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—è–Ω–≤–∞—Ä—å 2026)

**–°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤—ã:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Kotlin
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram API
- –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è GigaChat
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π —á–∞—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è (20+ —Å–æ–æ–±—â–µ–Ω–∏–π)

**–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- Clean Architecture —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏
- Thread-safe —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–º GigaChat —á–µ—Ä–µ–∑ Mutex
- Graceful shutdown
- Health Check —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 12222

### –î–µ–Ω—å 11-13: MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (27-28 —è–Ω–≤–∞—Ä—è 2026)

**–≠—Ç–∞–ø 1 - HTTP MCP:**
- –°–æ–∑–¥–∞–Ω–∏–µ HttpMcpService –¥–ª—è Node.js —Å–µ—Ä–≤–µ—Ä–æ–≤
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Chuck Norris MCP —Å–µ—Ä–≤–µ—Ä–∞ (—Ç–µ—Å—Ç–æ–≤—ã–π)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GigaChat function calling
- ToolCallHandler –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–∑–æ–≤–æ–≤

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå Invalid function result json string - GigaChat —Ç—Ä–µ–±–æ–≤–∞–ª JSON –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –†–µ—à–µ–Ω–æ: –æ–±–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `{"result": "..."}`

**–≠—Ç–∞–ø 2 - Reminders MCP:**
- –ó–∞–º–µ–Ω–∞ Chuck Norris –Ω–∞ Reminders MCP (–ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π)
- –°–æ–∑–¥–∞–Ω–∏–µ MCP Weather —Å–µ—Ä–≤–µ—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Reminders MCP —Å–µ—Ä–≤–µ—Ä–∞ (3 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ Chuck MCP (–¥–ª—è —É—Ç—Ä–µ–Ω–Ω–∏—Ö —à—É—Ç–æ–∫)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 3 HTTP MCP —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 3001-3003

### –î–µ–Ω—å 14: Stdio MCP + Docker (28 —è–Ω–≤–∞—Ä—è 2026)

**Docker MCP —Å–µ—Ä–≤–µ—Ä:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è StdioMcpService –¥–ª—è Python —Å–µ—Ä–≤–µ—Ä–æ–≤
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ mcp-server-docker —á–µ—Ä–µ–∑ pipx
- 7 Docker –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (compose, ps, images, logs, etc.)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- JSON-RPC over stdin/stdout –ø—Ä–æ—Ç–æ–∫–æ–ª
- –¢—Ä–µ–±—É–µ—Ç Docker Desktop
- Python 3.12+ requirement

**–ò—Ç–æ–≥–æ:** 12 MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (5 HTTP + 7 Stdio)

### –î–µ–Ω—å 15-16: –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (28-29 —è–Ω–≤–∞—Ä—è 2026)

**ReminderScheduler:**
- –§–æ–Ω–æ–≤—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å –µ–∂–µ–º–∏–Ω—É—Ç–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
- ChatSettingsManager –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É—Ç—Ä–µ–Ω–Ω–∏—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–≥–æ–¥–æ–π –∏ —à—É—Ç–∫–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–∞—Ç ("—Å–µ–≥–æ–¥–Ω—è" = –≤—á–µ—Ä–∞)
- ‚úÖ –†–µ—à–µ–Ω–æ: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—ä–µ–∫—Ü–∏—è —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç

**–ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã:**
- –ò–∑ –ø–∞–º—è—Ç–∏ (MutableMap) ‚Üí –≤ ChatSettings
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

### –î–µ–Ω—å 17: RAG —Å–∏—Å—Ç–µ–º–∞ (3 —Ñ–µ–≤—Ä–∞–ª—è 2026)

**–ë–∞–∑–æ–≤–∞—è RAG:**
- RagService —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
- EmbeddingService –¥–ª—è Ollama nomic-embed-text
- TextChunker –∏ MarkdownPreprocessor
- /createEmbeddings –∏ /testRag –∫–æ–º–∞–Ω–¥—ã

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- 768-–º–µ—Ä–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã (nomic-embed-text)
- –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞
- –ß–∞–Ω–∫–∏–Ω–≥ –ø–æ 200 —Å–∏–º–≤–æ–ª–æ–≤ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º 50
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ `embeddings_store/`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è RAG —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API

### –î–µ–Ω—å 18: RAG Reranker + —Ñ–∏–ª—å—Ç—Ä (4 —Ñ–µ–≤—Ä–∞–ª—è 2026)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ç–æ–ø-5 —á–∞–Ω–∫–æ–≤, –Ω–æ —á–∞—Å—Ç—å –±—ã–ª–∏ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- RagSearchResult data class —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- `/compareRag` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è 3 –ø–æ–¥—Ö–æ–¥–æ–≤
- `/setThreshold` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä–æ–≥–∞

**–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ ChatSettings:**
```kotlin
val ragRelevanceThreshold: Float = 0.5F
val ragEnabled: Boolean = true
val ragTopK: Int = 5
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–∫—Ä–∞—â–∞–µ—Ç —à—É–º –Ω–∞ 20-30%
- –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã < 10ms
- –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ 15-25%

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** RAG_RERANKER.md (680 —Å—Ç—Ä–æ–∫)

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –†–∞–∑–º–µ—Ä –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

**Kotlin –∫–æ–¥:**
- Domain layer: ~800 —Å—Ç—Ä–æ–∫
- Infrastructure layer: ~1500 —Å—Ç—Ä–æ–∫
- Main.kt: ~200 —Å—Ç—Ä–æ–∫
- Models: ~300 —Å—Ç—Ä–æ–∫
- **–ò—Ç–æ–≥–æ:** ~2800 —Å—Ç—Ä–æ–∫ Kotlin –∫–æ–¥–∞

**Node.js MCP —Å–µ—Ä–≤–µ—Ä—ã:**
- mcp-weather-server: ~150 —Å—Ç—Ä–æ–∫
- mcp-reminders-server: ~250 —Å—Ç—Ä–æ–∫
- mcp-chuck-server: ~100 —Å—Ç—Ä–æ–∫
- **–ò—Ç–æ–≥–æ:** ~500 —Å—Ç—Ä–æ–∫ JavaScript

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- 13 MD —Ñ–∞–π–ª–æ–≤
- ~5000 —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- 12 MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (5 HTTP + 7 Stdio)
- 3 AI –º–æ–¥–µ–ª–∏ (GigaChat, llama3.2:1b, nomic-embed-text)
- 15+ –∫–æ–º–∞–Ω–¥ Telegram
- 2 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ MCP (HTTP, Stdio)

**–•—Ä–∞–Ω–∏–ª–∏—â–µ:**
- JSON-based –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- 4 —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö (–∏—Å—Ç–æ—Ä–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, embeddings, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)
- Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏

**Performance:**
- Health check: instant
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫: 1-2 —Å–µ–∫
- RAG –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: 5-10 —Å–µ–∫
- MCP tool calling: 2-5 —Å–µ–∫

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. Clean Architecture
- Domain —Å–ª–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

### 2. Dual MCP Protocol
- HTTP –¥–ª—è Node.js —Å–µ—Ä–≤–µ—Ä–æ–≤ (–ø—Ä–æ—â–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- Stdio –¥–ª—è Python —Å–µ—Ä–≤–µ—Ä–æ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç MCP)
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π ToolCallHandler

### 3. –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- JSON —Ñ–∞–π–ª—ã –≤–º–µ—Å—Ç–æ –ë–î (–ø—Ä–æ—Å—Ç–æ—Ç–∞)
- Thread-safe —Å Mutex
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### 4. –õ–æ–∫–∞–ª—å–Ω–∞—è RAG
- Ollama –≤–º–µ—Å—Ç–æ –ø–ª–∞—Ç–Ω—ã—Ö API
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏
- –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### 5. Graceful degradation
- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ MCP
- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ RAG
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **SSL verification disabled** - –¥–ª—è GigaChat –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
2. **Response truncation** - 3800 —Å–∏–º–≤–æ–ª–æ–≤ (–ª–∏–º–∏—Ç Telegram)
3. **Tool calling limit** - –º–∞–∫—Å–∏–º—É–º 5 –∏—Ç–µ—Ä–∞—Ü–∏–π
4. **Single document RAG** - —Ç–æ–ª—å–∫–æ readme.md
5. **Fixed chunk size** - 200 —Å–∏–º–≤–æ–ª–æ–≤ (–º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ–∑–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
6. **Small LLM** - llama3.2:1b –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –¥–µ—Ç–∞–ª–∏

## –ë—É–¥—É—â–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] Unit –∏ Integration —Ç–µ—Å—Ç—ã
- [ ] REST API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å Telegram
- [ ] Metrics –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus)
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] CI/CD pipeline

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] LLM-based RAG reranker
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- [ ] –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π + BM25)
- [ ] –ú–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–π RAG
- [ ] –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] –ì—Ä–∞—Ñ–æ–≤–∞—è RAG (—Å–≤—è–∑–∏ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏)
- [ ] Streaming –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö tool calls
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- [ ] UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

---

# –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

TeleGaGa - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç —Å –ø–µ—Ä–µ–¥–æ–≤—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏:

‚úÖ **MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - 12 –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ 2 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
‚úÖ **RAG —Å–∏—Å—Ç–µ–º–∞** - –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–≥–æ–¥–æ–π –∏ —à—É—Ç–∫–∞–º–∏
‚úÖ **Clean Architecture** - –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è
‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–µ LLM** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —á–µ—Ä–µ–∑ Ollama

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Kotlin, GigaChat, Ollama, MCP (HTTP + Stdio), RAG, Telegram API

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** 18 –¥–Ω–µ–π (27 —è–Ω–≤–∞—Ä—è - 4 —Ñ–µ–≤—Ä–∞–ª—è 2026)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 13 MD —Ñ–∞–π–ª–æ–≤, 5000+ —Å—Ç—Ä–æ–∫

**–ö–æ–¥:** ~2800 —Å—Ç—Ä–æ–∫ Kotlin, ~500 —Å—Ç—Ä–æ–∫ JavaScript

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É ‚úÖ

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 04 —Ñ–µ–≤—Ä–∞–ª—è 2026
**–ê–≤—Ç–æ—Ä:** TeleGaGa Development Team
