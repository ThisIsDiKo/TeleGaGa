# RAG ัะธััะตะผะฐ TeleGaGa

## ะะฟะธัะฐะฝะธะต

TeleGaGa ะฑะพั ะพัะฝะฐัะตะฝ ัะธััะตะผะพะน **Retrieval-Augmented Generation (RAG)** - ัะตัะฝะพะปะพะณะธะตะน, ะบะพัะพัะฐั ัะปัััะฐะตั ะพัะฒะตัั ัะทัะบะพะฒะพะน ะผะพะดะตะปะธ ะฟััะตะผ ะฟัะตะดะพััะฐะฒะปะตะฝะธั ัะตะปะตะฒะฐะฝัะฝะพะณะพ ะบะพะฝัะตะบััะฐ ะธะท ะดะพะบัะผะตะฝัะฐัะธะธ.

**ะะปััะตะฒะฐั ะพัะพะฑะตะฝะฝะพััั**: ะะพะปะฝะพัััั ะปะพะบะฐะปัะฝะฐั ัะตะฐะปะธะทะฐัะธั ะฝะฐ ะฑะฐะทะต **Ollama** - ะฝะต ััะตะฑัะตั ะฒะฝะตัะฝะธั ะฟะปะฐัะฝัั API.

## ะััะธัะตะบัััะฐ RAG ัะธััะตะผั

### ะะพะผะฟะพะฝะตะฝัั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     Telegram Bot                             โ
โ                    /testRag <ะฒะพะฟัะพั>                         โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    RagService                                โ
โ  1. ะะตะฝะตัะฐัะธั embedding ะดะปั ะฒะพะฟัะพัะฐ (Ollama nomic-embed)    โ
โ  2. ะะพะธัะบ ัะพะฟ-5 ัะฐะฝะบะพะฒ ะฟะพ ะบะพัะธะฝััะฝะพะผั ััะพะดััะฒั             โ
โ  3. ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะบะพะฝัะตะบััะฐ                                โ
โโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                       โ
                       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  Ollama Client                               โ
โ  ะะฒะฐ ะฟะฐัะฐะปะปะตะปัะฝัั ะทะฐะฟัะพัะฐ ะบ llama3.2:1b:                    โ
โ  โข ะัะฒะตั ะะะ RAG: ัะพะปัะบะพ ะฒะพะฟัะพั                             โ
โ  โข ะัะฒะตั ะก RAG: ะฒะพะฟัะพั + ัะพะฟ-5 ัะตะปะตะฒะฐะฝัะฝัั ัะฐะฝะบะพะฒ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะคะฐะนะปั

| ะะพะผะฟะพะฝะตะฝั | ะคะฐะนะป | ะะฐะทะฝะฐัะตะฝะธะต |
|-----------|------|------------|
| **RAG ัะตัะฒะธั** | `src/main/kotlin/ru/dikoresearch/domain/RagService.kt` | ะะตะบัะพัะฝัะน ะฟะพะธัะบ ะฟะพ embeddings |
| **Telegram ะบะพะผะฐะฝะดั** | `src/main/kotlin/ru/dikoresearch/infrastructure/telegram/TelegramBotService.kt` | ะะพะผะฐะฝะดั `/testRag` ะธ `/createEmbeddings` |
| **Ollama ะบะปะธะตะฝั** | `src/main/kotlin/ru/dikoresearch/infrastructure/http/OllamaClient.kt` | HTTP API ะดะปั Ollama |
| **Embedding ัะตัะฒะธั** | `src/main/kotlin/ru/dikoresearch/infrastructure/embeddings/EmbeddingService.kt` | ะะตะฝะตัะฐัะธั ะธ ัะฟัะฐะฒะปะตะฝะธะต embeddings |
| **ะฅัะฐะฝะธะปะธัะต** | `embeddings_store/readme.embeddings.json` | ะะตะบัะพัะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั (1.3MB, 63 ัะฐะฝะบะฐ) |

## ะะพัััะฟะฝัะต ะบะพะผะฐะฝะดั

### `/createEmbeddings`

ะกะพะทะดะฐะตั ะฒะตะบัะพัะฝัั ะฑะฐะทั ะดะฐะฝะฝัั ะธะท ะดะพะบัะผะตะฝัะฐัะธะธ.

**ะัะพัะตัั:**
1. ะงะธัะฐะตั ัะฐะนะป `rag_docs/readme.md`
2. ะัะตะดะพะฑัะฐะฑะฐััะฒะฐะตั Markdown (ัะดะฐะปัะตั ะบะพะด-ะฑะปะพะบะธ)
3. ะะฐะทะฑะธะฒะฐะตั ะฝะฐ ัะฐะฝะบะธ ะฟะพ 200 ัะธะผะฒะพะปะพะฒ ั ะฟะตัะตะบัััะธะตะผ 50
4. ะะตะฝะตัะธััะตั embeddings ัะตัะตะท Ollama (ะผะพะดะตะปั `nomic-embed-text`)
5. ะกะพััะฐะฝัะตั ะฒ `embeddings_store/readme.embeddings.json`

**ะัะธะผะตั ะฒัะฒะพะดะฐ:**
```
โ Embeddings ััะฟะตัะฝะพ ัะพะทะดะฐะฝั!

๐ ะกัะฐัะธััะธะบะฐ:
โข ะััะพะดะฝัะน ัะฐะนะป: readme.md
โข ะะฐะทะผะตั ัะฐะนะปะฐ: 12847 ัะธะผะฒะพะปะพะฒ
โข ะกะพะทะดะฐะฝะพ ัะฐะฝะบะพะฒ: 63
โข ะะฐะทะผะตัะฝะพััั ะฒะตะบัะพัะพะฒ: 768
โข ะัะตะผั ะพะฑัะฐะฑะพัะบะธ: 45.3 ัะตะบ
```

**ะขัะตะฑะพะฒะฐะฝะธั:**
- Ollama ะทะฐะฟััะตะฝะฐ ะธ ะดะพัััะฟะฝะฐ
- ะะพะดะตะปั `nomic-embed-text` ัััะฐะฝะพะฒะปะตะฝะฐ: `ollama pull nomic-embed-text`

---

### `/testRag <ะฒะพะฟัะพั>`

ะกัะฐะฒะฝะธะฒะฐะตั ะพัะฒะตัั ัะทัะบะพะฒะพะน ะผะพะดะตะปะธ ั RAG ะธ ะฑะตะท RAG.

**ะะปะณะพัะธัะผ:**
1. **ะะพะธัะบ ัะฐะฝะบะพะฒ**: ะะตะฝะตัะธััะตั embedding ะดะปั ะฒะพะฟัะพัะฐ ะธ ะฝะฐัะพะดะธั ัะพะฟ-5 ัะตะปะตะฒะฐะฝัะฝัั ััะฐะณะผะตะฝัะพะฒ ะดะพะบัะผะตะฝัะฐัะธะธ
2. **ะัะฒะตั ะะะ RAG**: ะัะฟัะฐะฒะปัะตั ะฒะพะฟัะพั ะฝะฐะฟััะผัั ะฒ Ollama (llama3.2:1b)
3. **ะัะฒะตั ะก RAG**: ะัะฟัะฐะฒะปัะตั ะฒะพะฟัะพั + ัะพะฟ-5 ัะฐะฝะบะพะฒ ะฒ Ollama (llama3.2:1b)
4. **ะกัะฐะฒะฝะตะฝะธะต**: ะะพะบะฐะทัะฒะฐะตั ะพะฑะฐ ะพัะฒะตัะฐ, ััะฐัะธััะธะบั ัะตะปะตะฒะฐะฝัะฝะพััะธ ะธ ัะพะบะตะฝะพะฒ

**ะคะพัะผะฐั ะฒัะฒะพะดะฐ:**

```
โโโโโโโโโโโโโโโโโโโโ
๐ค ะะขะะะข ะะะ RAG:
โโโโโโโโโโโโโโโโโโโโ

[ะัะฒะตั ะผะพะดะตะปะธ ะฑะตะท ะดะพัััะฟะฐ ะบ ะดะพะบัะผะตะฝัะฐัะธะธ]

โโโโโโโโโโโโโโโโโโโโ
๐ง ะะขะะะข ะก RAG (ัะพะฟ-5 ัะฐะฝะบะพะฒ):
โโโโโโโโโโโโโโโโโโโโ

[ะัะฒะตั ะผะพะดะตะปะธ ั ะบะพะฝัะตะบััะพะผ ะธะท ะดะพะบัะผะตะฝัะฐัะธะธ]

โโโโโโโโโโโโโโโโโโโโ
๐ ะกะขะะขะะกะขะะะ:
โโโโโโโโโโโโโโโโโโโโ

ะะฐะนะดะตะฝะฝัะต ัะฐะฝะบะธ:
1. ะงะฐะฝะบ #12: 0.8543 (85%)
2. ะงะฐะฝะบ #34: 0.7892 (79%)
3. ะงะฐะฝะบ #7: 0.7234 (72%)
4. ะงะฐะฝะบ #45: 0.6891 (69%)
5. ะงะฐะฝะบ #23: 0.6543 (65%)

ะัะฟะพะปัะทะพะฒะฐะฝะพ ัะพะบะตะฝะพะฒ (Ollama):
โข ะะตะท RAG: 245 ัะพะบะตะฝะพะฒ (prompt: 150, response: 95)
โข ะก RAG: 672 ัะพะบะตะฝะพะฒ (prompt: 480, response: 192)
  (+174% ะดะปั ะบะพะฝัะตะบััะฐ)

โโโโโโโโโโโโโโโโโโโโ
๐ก ะะซะะะ:
โโโโโโโโโโโโโโโโโโโโ

โ RAG ะฟะพะผะพะณ: ะฝะฐะนะดะตะฝั ะฒััะพะบะพัะตะปะตะฒะฐะฝัะฝัะต ัะฐะฝะบะธ (78%)
ะัะฒะตั ะก RAG ะดะพะปะถะตะฝ ะฑััั ัะพัะฝะตะต ะธ ัะพะดะตัะถะฐัะตะปัะฝะตะต.
```

**ะัะธัะตัะธะธ ะพัะตะฝะบะธ:**
- โ **RAG ะฟะพะผะพะณ** (ัะตะปะตะฒะฐะฝัะฝะพััั โฅ70%) - ะฝะฐะนะดะตะฝั ัะพัะฝัะต ััะฐะณะผะตะฝัั ะดะพะบัะผะตะฝัะฐัะธะธ
- โ๏ธ **RAG ัะฐััะธัะฝะพ ะฟะพะผะพะณ** (ัะตะปะตะฒะฐะฝัะฝะพััั 50-70%) - ะฝะฐะนะดะตะฝั ัะฒัะทะฐะฝะฝัะต ััะฐะณะผะตะฝัั
- โ **RAG ะฝะต ะฟะพะผะพะณ** (ัะตะปะตะฒะฐะฝัะฝะพััั <50%) - ะฒะพะฟัะพั ะฒััะพะดะธั ะทะฐ ัะฐะผะบะธ ะดะพะบัะผะตะฝัะฐัะธะธ

## ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะัะธะผะตั 1: ะขะตัะฝะธัะตัะบะธะน ะฒะพะฟัะพั (RAG ะฟะพะผะพะณะฐะตั)

**ะะพะฟัะพั:**
```
/testRag ะะฐะบะธะต MCP ัะตัะฒะตัั ะธัะฟะพะปัะทััััั ะฒ ะฟัะพะตะบัะต?
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
- ะะตะท RAG: ะะฑัะธะน ะพัะฒะตั ะธะปะธ "ะฝะต ะทะฝะฐั"
- ะก RAG: ะขะพัะฝัะน ัะฟะธัะพะบ ะฒัะตั 12 MCP ะธะฝััััะผะตะฝัะพะฒ ะธะท ะดะพะบัะผะตะฝัะฐัะธะธ
- ะะตะปะตะฒะฐะฝัะฝะพััั: ~85-90%

---

### ะัะธะผะตั 2: ะะพะฝัะธะณััะฐัะธะพะฝะฝัะน ะฒะพะฟัะพั (RAG ะฟะพะผะพะณะฐะตั)

**ะะพะฟัะพั:**
```
/testRag ะะฐะบะพะน ะฟะพัั ะธัะฟะพะปัะทัะตั health check ัะตัะฒะตั?
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
- ะะตะท RAG: ะัะตะดะฟะพะปะพะถะตะฝะธะต ะธะปะธ ะพะฑัะธะน ะพัะฒะตั
- ะก RAG: ะขะพัะฝัะน ะพัะฒะตั "12222"
- ะะตะปะตะฒะฐะฝัะฝะพััั: ~80-85%

---

### ะัะธะผะตั 3: ะะพะฟัะพั ะฒะฝะต ะดะพะบัะผะตะฝัะฐัะธะธ (RAG ะฝะต ะฟะพะผะพะณะฐะตั)

**ะะพะฟัะพั:**
```
/testRag ะะฐะบะฐั ะฟะพะณะพะดะฐ ะฒ ะะพัะบะฒะต ัะตะณะพะดะฝั?
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
- ะะตะท RAG: "ะฏ ะฝะต ะทะฝะฐั ัะตะบัััั ะฟะพะณะพะดั"
- ะก RAG: ะะฝะฐะปะพะณะธัะฝัะน ะพัะฒะตั (ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ ะฝะตั ะธะฝัะพัะผะฐัะธะธ ะพ ะฟะพะณะพะดะต)
- ะะตะปะตะฒะฐะฝัะฝะพััั: ~20-30%

---

### ะัะธะผะตั 4: ะััะธัะตะบัััะฝัะน ะฒะพะฟัะพั (RAG ะฟะพะผะพะณะฐะตั)

**ะะพะฟัะพั:**
```
/testRag ะะฐะบ ัะฐะฑะพัะฐะตั ะฐะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ัะพะบะตะฝะฐ ะฒ GigaChat?
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
- ะะตะท RAG: ะะฑัะตะต ะพะฟะธัะฐะฝะธะต OAuth
- ะก RAG: ะะตัะฐะปะธ ัะตะฐะปะธะทะฐัะธะธ (Mutex, ะพะฑัะฐะฑะพัะบะฐ 401, thread-safe)
- ะะตะปะตะฒะฐะฝัะฝะพััั: ~75-80%

## ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะะตะบัะพัะฝัะน ะฟะพะธัะบ

**ะะปะณะพัะธัะผ ะบะพัะธะฝััะฝะพะณะพ ััะพะดััะฒะฐ:**
```kotlin
cosine_similarity(A, B) = (A ยท B) / (||A|| ร ||B||)

ะณะดะต:
A ยท B = ัะบะฐะปััะฝะพะต ะฟัะพะธะทะฒะตะดะตะฝะธะต ะฒะตะบัะพัะพะฒ
||A|| = ะฝะพัะผะฐ ะฒะตะบัะพัะฐ A (sqrt(sum(a_i^2)))
||B|| = ะฝะพัะผะฐ ะฒะตะบัะพัะฐ B (sqrt(sum(b_i^2)))
```

**ะะฐะทะผะตัะฝะพััั ะฒะตะบัะพัะพะฒ:** 768 (ะผะพะดะตะปั nomic-embed-text)

**ะัะพัะตัั ะฟะพะธัะบะฐ:**
1. ะะฐะณััะทะบะฐ ะฒัะตั embeddings ะธะท JSON (63 ัะฐะฝะบะฐ)
2. ะะตะฝะตัะฐัะธั embedding ะดะปั ะฒะพะฟัะพัะฐ (768-ะผะตัะฝัะน ะฒะตะบัะพั)
3. ะััะธัะปะตะฝะธะต ะบะพัะธะฝััะฝะพะณะพ ััะพะดััะฒะฐ ั ะบะฐะถะดัะผ ัะฐะฝะบะพะผ
4. ะกะพััะธัะพะฒะบะฐ ะฟะพ ัะฑัะฒะฐะฝะธั ัะตะปะตะฒะฐะฝัะฝะพััะธ
5. ะะพะทะฒัะฐั ัะพะฟ-5 ัะตะทัะปััะฐัะพะฒ

### ะะพะดะตะปะธ Ollama

| ะะพะดะตะปั | ะะฐะทะฝะฐัะตะฝะธะต | ะะฐะทะผะตั | ะะฐัะฐะผะตััั |
|--------|------------|--------|-----------|
| **nomic-embed-text:latest** | ะะตะฝะตัะฐัะธั embeddings | 274MB | 137M |
| **llama3.2:1b** | ะะตะฝะตัะฐัะธั ะพัะฒะตัะพะฒ | 1.3GB | 1.2B |

### ะงะฐะฝะบะธะฝะณ ะดะพะบัะผะตะฝัะฐัะธะธ

**ะะฐัะฐะผะตััั:**
- ะะฐะทะผะตั ัะฐะฝะบะฐ: 200 ัะธะผะฒะพะปะพะฒ
- ะะตัะตะบัััะธะต (overlap): 50 ัะธะผะฒะพะปะพะฒ
- ะัะตะดะพะฑัะฐะฑะพัะบะฐ: ัะดะฐะปะตะฝะธะต ะบะพะด-ะฑะปะพะบะพะฒ, ัะฐะทะฑะธะตะฝะธะต ะฝะฐ ะฐะฑะทะฐัั

**ะัะธะผะตั ัะฐะฝะบะฐ:**
```json
{
  "text": "# CLAUDE.md\n\nThis file provides guidance to Claude Code...",
  "embedding": [-0.059, -0.292, -2.586, ...],
  "index": 0
}
```

## ะขัะตะฑะพะฒะฐะฝะธั

### ะกะธััะตะผะฝัะต ััะตะฑะพะฒะฐะฝะธั

1. **Ollama** ัััะฐะฝะพะฒะปะตะฝะฐ ะธ ะทะฐะฟััะตะฝะฐ:
   ```bash
   # macOS
   brew install ollama
   ollama serve

   # Linux
   curl -fsSL https://ollama.com/install.sh | sh
   ollama serve
   ```

2. **ะะพะดะตะปะธ Ollama** ัะบะฐัะฐะฝั:
   ```bash
   ollama pull nomic-embed-text  # ะดะปั embeddings
   ollama pull llama3.2:1b       # ะดะปั ะณะตะฝะตัะฐัะธะธ ะพัะฒะตัะพะฒ
   ```

3. **Java 17** ะดะปั ัะฑะพัะบะธ ะฟัะพะตะบัะฐ:
   ```bash
   export JAVA_HOME=/Users/dmitriikonovalov/Library/Java/JavaVirtualMachines/openjdk-17.0.1/Contents/Home
   ```

### ะคะฐะนะปะพะฒะฐั ััััะบัััะฐ

```
TeleGaGa/
โโโ rag_docs/
โ   โโโ readme.md                    # ะััะพะดะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ embeddings_store/
โ   โโโ readme.embeddings.json       # ะะตะบัะพัะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั
โโโ src/main/kotlin/
โ   โโโ ru/dikoresearch/
โ       โโโ domain/
โ       โ   โโโ RagService.kt        # ะะตะบัะพัะฝัะน ะฟะพะธัะบ
โ       โ   โโโ TextChunker.kt       # ะะฐะทะฑะธะตะฝะธะต ัะตะบััะฐ
โ       โ   โโโ MarkdownPreprocessor.kt
โ       โโโ infrastructure/
โ           โโโ embeddings/
โ           โ   โโโ EmbeddingService.kt
โ           โโโ http/
โ           โ   โโโ OllamaClient.kt  # API ะบะปะธะตะฝั Ollama
โ           โโโ persistence/
โ               โโโ EmbeddingsManager.kt
```

## ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะัะตะผั ะณะตะฝะตัะฐัะธะธ embeddings (readme.md, 63 ัะฐะฝะบะฐ)
- **ะะพะบะฐะปัะฝะพ (Ollama)**: ~45 ัะตะบัะฝะด
- **CPU**: Intel/Apple Silicon (ะทะฐะฒะธัะธั ะพั ะถะตะปะตะทะฐ)
- **RAM**: ~2GB ะดะปั ะผะพะดะตะปะธ nomic-embed-text

### ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั /testRag
- ะะพะธัะบ ัะฐะฝะบะพะฒ: ~1-2 ัะตะบัะฝะดั
- ะะตะฝะตัะฐัะธั ะพัะฒะตัะฐ ะะะ RAG: ~3-5 ัะตะบัะฝะด
- ะะตะฝะตัะฐัะธั ะพัะฒะตัะฐ ะก RAG: ~5-10 ัะตะบัะฝะด (ะฑะพะปััะต ัะพะบะตะฝะพะฒ ะฒ ะฟัะพะผะฟัะต)
- **ะัะพะณะพ**: ~10-20 ัะตะบัะฝะด ะฝะฐ ะฟะพะปะฝัะน ัะธะบะป

## ะะณัะฐะฝะธัะตะฝะธั

1. **ะะฐะทะผะตั ัะฐะฝะบะพะฒ**: ะคะธะบัะธัะพะฒะฐะฝะฝัะน (200 ัะธะผะฒะพะปะพะฒ), ะผะพะถะตั ัะฐะทัะตะทะฐัั ะฟัะตะดะปะพะถะตะฝะธั
2. **ะขะพะฟ-K**: ะัะตะณะดะฐ 5 ัะฐะฝะบะพะฒ, ะฝะต ะฐะดะฐะฟัะธััะตััั ะฟะพะด ัะตะปะตะฒะฐะฝัะฝะพััั
3. **ะะดะฝะฐ ะฑะฐะทะฐ**: ะขะพะปัะบะพ `readme.md`, ะฝะตั ะฟะพะดะดะตัะถะบะธ ะฝะตัะบะพะปัะบะธั ะดะพะบัะผะตะฝัะพะฒ
4. **ะฏะทัะบ**: ะัััะต ัะฐะฑะพัะฐะตั ั ะฐะฝะณะปะธะนัะบะธะผ ัะตะบััะพะผ (ะผะพะดะตะปั ะพะฑััะฐะปะฐัั ะฝะฐ ะฐะฝะณะปะธะนัะบะพะผ)
5. **ะะพะฝัะตะบัั LLM**: llama3.2:1b - ะฝะตะฑะพะปััะฐั ะผะพะดะตะปั, ะผะพะถะตั ะฟัะพะฟััะบะฐัั ะดะตัะฐะปะธ

## ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั

### ะัะฐัะบะพััะพัะฝัะต (ะฟัะพัััะต)
- [ ] ะะดะฐะฟัะธะฒะฝัะน TopK (ะพั 3 ะดะพ 10 ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะตะปะตะฒะฐะฝัะฝะพััะธ)
- [ ] ะะธะฝะธะผะฐะปัะฝัะน ะฟะพัะพะณ ัะตะปะตะฒะฐะฝัะฝะพััะธ (ะฝะฐะฟัะธะผะตั, 0.5)
- [ ] ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ะดะพะบัะผะตะฝัะพะฒ (`/testRag <ัะฐะนะป> <ะฒะพะฟัะพั>`)
- [ ] ะััะธัะพะฒะฐะฝะธะต embeddings ะฒะพะฟัะพัะพะฒ

### ะะพะปะณะพััะพัะฝัะต (ัะปะพะถะฝัะต)
- [ ] ะะธะฑัะธะดะฝัะน ะฟะพะธัะบ (ะฒะตะบัะพัะฝัะน + BM25 ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ)
- [ ] ะะตัะตัะฐะฝะถะธัะพะฒะฐะฝะธะต ัะตะทัะปััะฐัะพะฒ (cross-encoder)
- [ ] ะกะตะผะฐะฝัะธัะตัะบะพะต ัะฐะฝะบะธัะพะฒะฐะฝะธะต (ัะฐะทะฑะธะตะฝะธะต ะฟะพ ัะผััะปั, ะฐ ะฝะต ะฟะพ ัะธะผะฒะพะปะฐะผ)
- [ ] ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฑะพะปะตะต ะผะพัะฝะพะน ะผะพะดะตะปะธ (llama3:8b ะฒะผะตััะพ llama3.2:1b)
- [ ] ะัะฐัะพะฒะฐั RAG (ัะฒัะทะธ ะผะตะถะดั ัะฐะฝะบะฐะผะธ)

## Troubleshooting

### ะัะธะฑะบะฐ: "ะคะฐะนะป embeddings ะฝะต ะฝะฐะนะดะตะฝ"
**ะะตัะตะฝะธะต**: ะกะพะทะดะฐะนัะต embeddings ะบะพะผะฐะฝะดะพะน `/createEmbeddings`

### ะัะธะฑะบะฐ: "Ollama embeddings error: Connection refused"
**ะะตัะตะฝะธะต**:
```bash
# ะัะพะฒะตัััะต, ััะพ Ollama ะทะฐะฟััะตะฝะฐ
ollama serve

# ะ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต ะฟัะพะฒะตัััะต ะดะพัััะฟะฝะพััั
curl http://localhost:11434/api/tags
```

### ะะธะทะบะฐั ัะตะปะตะฒะฐะฝัะฝะพััั ัะฐะฝะบะพะฒ (<50%)
**ะัะธัะธะฝั:**
- ะะพะฟัะพั ะฒััะพะดะธั ะทะฐ ัะฐะผะบะธ ะดะพะบัะผะตะฝัะฐัะธะธ
- ะะพะบัะผะตะฝัะฐัะธั ะฝะต ัะพะดะตัะถะธั ัะตะปะตะฒะฐะฝัะฝะพะน ะธะฝัะพัะผะฐัะธะธ
- ะะพะฟัะพั ััะพัะผัะปะธัะพะฒะฐะฝ ัะปะธัะบะพะผ ะฐะฑัััะฐะบัะฝะพ

**ะะตัะตะฝะธะต**: ะะตัะตัะพัะผัะปะธััะนัะต ะฒะพะฟัะพั ะฑะพะปะตะต ะบะพะฝะบัะตัะฝะพ

### ะัะฒะตั ะก RAG ััะถะต ะพัะฒะตัะฐ ะะะ RAG
**ะัะธัะธะฝั:**
- ะะฐะนะดะตะฝะฝัะต ัะฐะฝะบะธ ะฝะตัะตะปะตะฒะฐะฝัะฝั (ััะผ ะฒ ะบะพะฝัะตะบััะต)
- ะะพะดะตะปั llama3.2:1b ัะปะธัะบะพะผ ะผะฐะปะฐ ะดะปั ัะปะพะถะฝะพะน ะพะฑัะฐะฑะพัะบะธ ะบะพะฝัะตะบััะฐ

**ะะตัะตะฝะธะต**:
- ะฃะปัััะธัะต ัะฐะฝะบะธะฝะณ ะดะพะบัะผะตะฝัะฐัะธะธ
- ะัะฟะพะปัะทัะนัะต ะฑะพะปะตะต ะผะพัะฝัั ะผะพะดะตะปั (`ollama pull llama3:8b`)

## ะััะพัะฝะธะบะธ

- **Ollama**: https://ollama.com
- **nomic-embed-text**: https://ollama.com/library/nomic-embed-text
- **RAG ะบะพะฝัะตะฟัะธั**: https://arxiv.org/abs/2005.11401
- **ะะพัะธะฝััะฝะพะต ััะพะดััะฒะพ**: https://en.wikipedia.org/wiki/Cosine_similarity

---

**ะะฐัะฐ ัะพะทะดะฐะฝะธั**: 2026-02-03
**ะะตััะธั**: 1.0
**ะะฒัะพั**: TeleGaGa Development Team
